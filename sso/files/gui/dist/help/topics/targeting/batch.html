<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Batch Size</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="concept">
      
      <meta name="DC.Title" content="Batch Size">
      
      <meta name="DC.Relation" scheme="URI" content="index.html">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="targeting-batch">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/gui/css/core.min.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/gui/css/webhelp.min.css">
      <script type="text/javascript" src="../../themes/gui/js/webhelp.min.js"></script>
      </head>
   <body>
      <div id="wrapper">
         <!--ZOOMSTOP-->
         <div id="sidebar-wrapper" class="user dynamic-toc"></div>
         <!--ZOOMRESTART-->
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="page concept  - topic-topic concept-concept " id="targeting-batch">
                        <!--ZOOMSTOP--><a href="#menu-toggle" class="btn btn-primary" id="menu-toggle">Toggle Menu</a><!--ZOOMRESTART--><h1 class="title topictitle1">Batch Size</h1>
                        <div class="body conbody">
                           <p class="p ids"><span class="ph" id="targeting-batch__batch-size"></span></p>
                           
                           <p class="p">The <tt class="ph tt">-b</tt> (or <tt class="ph tt">--batch-size</tt>) option allows commands to be executed on only
                              a specified number of minions at a time. Both percentages and finite numbers are
                              supported.
                           </p>
                           <pre class="pre codeblock language-bash">salt '*' -b 10 test.ping

salt -G 'os:RedHat' --batch-size 25% apache.signal restart</pre>
                           <p class="p">This will only run test.ping on 10 of the targeted minions at a time and then
                              restart apache on 25% of the minions matching <tt class="ph tt">os:RedHat</tt> at a time and work
                              through them all until the task is complete. This makes jobs like rolling web
                              server restarts behind a load balancer or doing maintenance on BSD firewalls
                              using carp much easier with salt.
                           </p>
                           
                           <p class="p">The batch system maintains a window of running minions, so, if there are a
                              total of 150 minions targeted and the batch size is 10, then the command is
                              sent to 10 minions, when one minion returns then the command is sent to one
                              additional minion, so that the job is constantly running on 10 minions.
                           </p>
                           
                        </div>
                        
                        <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="related-links"></div>
                     </div>
                     <button id="next-button" type="button" class="btn btn-primary">
                        Next <span class="glyphicon glyphicon-chevron-right"></span></button><div class="footer">

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>