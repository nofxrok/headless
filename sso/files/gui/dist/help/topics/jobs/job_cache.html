<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Managing the Job Cache</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="concept">
      
      <meta name="DC.Title" content="Managing the Job Cache">
      
      <meta name="DC.Relation" scheme="URI" content="index.html">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="managing-the-job-cache">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/gui/css/core.min.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/gui/css/webhelp.min.css">
      <script type="text/javascript" src="../../themes/gui/js/webhelp.min.js"></script>
      </head>
   <body>
      <div id="wrapper">
         <!--ZOOMSTOP-->
         <div id="sidebar-wrapper" class="user dynamic-toc"></div>
         <!--ZOOMRESTART-->
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="page concept  - topic-topic concept-concept " id="managing-the-job-cache">
                        <!--ZOOMSTOP--><a href="#menu-toggle" class="btn btn-primary" id="menu-toggle">Toggle Menu</a><!--ZOOMRESTART--><h1 class="title topictitle1">Managing the Job Cache</h1>
                        <div class="body conbody">
                           <p class="p">The Salt Master maintains a job cache of all job executions which can be
                              queried via the jobs runner. The way this job cache is managed is very
                              pluggable via Salt's underlying returner interface.
                           </p>
                           
                           <div class="section" id="managing-the-job-cache__default-job-cache">
                              <h2 class="title sectiontitle">Default Job Cache</h2>
                              <p class="p">A number of options are available when configuring the job cache. The default
                                 caching system uses local storage on the Salt Master and can be found in the
                                 job cache directory (on Linux systems this is typically
                                 /var/cache/salt/master/jobs). The default caching system is suitable for most
                                 deployments as it does not typically require any further configuration or
                                 management.
                              </p>
                              
                              <p class="p">The default job cache is a temporary cache and jobs will be stored for 24
                                 hours. If the default cache needs to store jobs for a different period the
                                 time can be easily adjusted by changing the <span class="keyword title_reference">keep_jobs</span> parameter in the
                                 Salt Master configuration file. The value passed in is measured via hours:
                              </p>
                              <pre class="pre codeblock language-yaml">keep_jobs: 24</pre>
                              </div>
                           
                           <div class="section" id="managing-the-job-cache__external-job-cache-options">
                              <h2 class="title sectiontitle">External Job Cache Options</h2>
                              <p class="p">Many deployments may wish to use an external database to maintain a long term
                                 register of executed jobs. Salt comes with two main mechanisms to do this, the
                                 master job cache and the external job cache. The difference is how the external
                                 data store is accessed.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="managing-the-job-cache__master-job-cache">
                              <h2 class="title sectiontitle">Master Job Cache</h2>
                              <p class="p"><span class="keyword versionmodified">New in version 2014.7.</span></p>
                              
                              <p class="p">The master job cache setting makes the built in job cache on the master
                                 modular. This system allows for the default cache to be swapped out by the Salt
                                 returner system. To configure the master job cache, set up an external returner
                                 database based on the instructions included with each returner and then simply
                                 add the following configuration to the master configuration file:
                              </p>
                              <pre class="pre codeblock language-yaml">master_job_cache: mysql</pre>
                              </div>
                           
                           <div class="section" id="managing-the-job-cache__external-job-cache">
                              <h2 class="title sectiontitle">External Job Cache</h2>
                              <p class="p">The external job cache setting instructs the minions to directly contact the
                                 data store. This scenario is helpful when the data store needs to be made
                                 available to the minions. This can be an effective way to share historic data
                                 across an infrastructure as data can be retrieved from the external job cache
                                 via the <tt class="ph tt">ret</tt> execution module.
                              </p>
                              
                              <p class="p">To configure the external job cache, set up a returner database in the manner
                                 described in the specific returner documentation. Ensure that the returner
                                 database is accessible from the minions, and set the <span class="keyword title_reference">ext_job_cache</span> setting
                                 in the master configuration file:
                              </p>
                              <pre class="pre codeblock language-yaml">ext_job_cache: redis</pre>
                              </div>
                           
                        </div>
                        
                        <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="related-links"></div>
                     </div>
                     <button id="next-button" type="button" class="btn btn-primary">
                        Next <span class="glyphicon glyphicon-chevron-right"></span></button><div class="footer">

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>