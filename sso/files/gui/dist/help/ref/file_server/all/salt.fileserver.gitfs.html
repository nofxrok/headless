<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>salt.fileserver.gitfs</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="reference">
      
      <meta name="DC.Title" content="salt.fileserver.gitfs">
      
      <meta name="DC.Relation" scheme="URI" content="../../fileserver.html">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="salt-fileserver-gitfs">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/gui/css/core.min.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/gui/css/webhelp.min.css">
      <script type="text/javascript" src="../../../themes/gui/js/webhelp.min.js"></script>
      </head>
   <body>
      <div id="wrapper">
         <!--ZOOMSTOP-->
         <div id="sidebar-wrapper" class="reference dynamic-toc"></div>
         <!--ZOOMRESTART-->
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="page reference  - topic-topic       reference-reference " id="salt-fileserver-gitfs">
                        <!--ZOOMSTOP--><a href="#menu-toggle" class="btn btn-primary" id="menu-toggle">Toggle Menu</a><!--ZOOMRESTART--><h1 class="title topictitle1">salt.fileserver.gitfs</h1>
                        <div class="body refbody">
                           <div class="section">
                              <p class="p ids"><span class="ph" id="salt-fileserver-gitfs__module-salt.fileserver.gitfs"></span></p>
                              
                              <p class="p">Git Fileserver Backend</p>
                              
                              <p class="p">With this backend, branches and tags in a remote git repository are exposed to
                                 salt as different environments.
                              </p>
                              
                              <p class="p">To enable, add <tt class="ph tt">git</tt> to the 
                                 		
                                 			&nbsp;<a class="xref" href="../../configuration/master.html#configuration-salt-master__fileserver_backend">fileserver_backend</a> option in the
                                 Master config file.
                              </p>
                              <pre class="pre codeblock language-yaml">fileserver_backend:
  - git</pre>
                              <p class="p">As of Salt 2014.7.0, the Git fileserver backend supports <a class="xref" href="https://github.com/gitpython-developers/GitPython" target="_blank">GitPython</a>, <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a>,
                                 and <a class="xref" href="https://www.samba.org/~jelmer/dulwich/" target="_blank">dulwich</a> to provide the Python interface to git. If more than one of these
                                 are present, the order of preference for which one will be chosen is the same
                                 as the order in which they were listed: pygit2, GitPython, dulwich (keep in
                                 mind, this order is subject to change).
                              </p>
                              
                              <p class="p">An optional master config parameter (
                                 		
                                 			&nbsp;<a class="xref" href="../../configuration/master.html#configuration-salt-master__gitfs_provider">gitfs_provider</a>) can be used
                                 to specify which provider should be used.
                              </p>
                              
                              <p class="p">More detailed information on how to use gitfs can be found in the 
                                 		
                                 			&nbsp;<a class="xref" href="../../../topics/tutorials/gitfs.html#tutorial-gitfs">Gitfs
                                    Walkthrough</a>.
                              </p>
                              
                              <aside class="note "><span class="glyphicon glyphicon-check"></span><span class="title">Note:</span> 
                                 <p class="p">Minimum requirements</p>
                                 
                                 <p class="p">To use <a class="xref" href="https://github.com/gitpython-developers/GitPython" target="_blank">GitPython</a> for gitfs requires a minimum GitPython version of 0.3.0,
                                    as well as the git CLI utility. Instructions for installing GitPython can
                                    be found 
                                    		
                                    			&nbsp;<a class="xref" href="../../../topics/tutorials/gitfs.html#tutorial-gitfs__gitfs-dependencies">here</a>.
                                 </p>
                                 
                                 <p class="p">To use <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a> for gitfs requires a minimum <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a> version of 0.20.3.
                                    <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a> 0.20.3 requires <a class="xref" href="https://libgit2.github.com/" target="_blank">libgit2</a> 0.20.0. <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a> and <a class="xref" href="https://libgit2.github.com/" target="_blank">libgit2</a> are developed
                                    alongside one another, so it is recommended to keep them both at the same
                                    major release to avoid unexpected behavior. For example, <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a> 0.21.x
                                    requires <a class="xref" href="https://libgit2.github.com/" target="_blank">libgit2</a> 0.21.x, <a class="xref" href="https://github.com/libgit2/pygit2" target="_blank">pygit2</a> 0.22.x will require <a class="xref" href="https://libgit2.github.com/" target="_blank">libgit2</a> 0.22.x, etc.
                                 </p>
                                 
                                 <p class="p">To find stale refs, pygit2 additionally requires the git CLI utility to be
                                    installed.
                                 </p>
                                 
                              </aside>
                              
                           </div>
                           
                        </div>
                        
                        <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="related-links"></div>
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.clear_cache">
                           <h2 class="title topictitle2">clear_cache</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.clear_cache( )</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Completely clear gitfs cache</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.clear_lock">
                           <h2 class="title topictitle2">clear_lock</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.clear_lock(
								remote=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Clear update.lk</p>
                                 
                                 <p class="p"><tt class="ph tt">remote</tt> can either be a dictionary containing repo configuration
                                    information, or a pattern. If the latter, then remotes for which the URL
                                    matches the pattern will be locked.
                                 </p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.dir_list">
                           <h2 class="title topictitle2">dir_list</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.dir_list(
								load
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a list of all directories on the master</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.envs">
                           <h2 class="title topictitle2">envs</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.envs(
								ignore_cache=False,
								skip_clean=False
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a list of refs that can be used as environments</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.file_hash">
                           <h2 class="title topictitle2">file_hash</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.file_hash(
								load,
								fnd
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a file hash, the hash type is set in the master config file</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.file_list">
                           <h2 class="title topictitle2">file_list</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.file_list(
								load
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a list of all files on the file server in a specified
                                    environment
                                 </p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.file_list_emptydirs">
                           <h2 class="title topictitle2">file_list_emptydirs</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.file_list_emptydirs(
								load
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a list of all empty directories on the master</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.find_file">
                           <h2 class="title topictitle2">find_file</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.find_file(
								path,
								tgt_env='base',
								**kwargs
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Find the first file to match the path and ref, read the file out of git
                                    and send the path to the newly cached file
                                 </p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.init">
                           <h2 class="title topictitle2">init</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.init( )</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return the git repo object for this session</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.lock">
                           <h2 class="title topictitle2">lock</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.lock(
								remote=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Place an update.lk</p>
                                 
                                 <p class="p"><tt class="ph tt">remote</tt> can either be a dictionary containing repo configuration
                                    information, or a pattern. If the latter, then remotes for which the URL
                                    matches the pattern will be locked.
                                 </p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.serve_file">
                           <h2 class="title topictitle2">serve_file</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.serve_file(
								load,
								fnd
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a chunk from a file based on the data received</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.symlink_list">
                           <h2 class="title topictitle2">symlink_list</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.symlink_list(
								load
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Return a dict of all symlinks based on a given path in the repo</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.fileserver.gitfs.update">
                           <h2 class="title topictitle2">update</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.fileserver.gitfs.update( )</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Execute a git fetch on all of the repos</p>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                     </div>
                     <button id="next-button" type="button" class="btn btn-primary">
                        Next <span class="glyphicon glyphicon-chevron-right"></span></button><div class="footer">

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>