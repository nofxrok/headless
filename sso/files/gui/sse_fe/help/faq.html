<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>Frequently Asked Questions</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="concept">
      
      <meta name="DC.Title" content="Frequently Asked Questions">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="frequently-asked-questions">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="themes/gui/css/core.min.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="themes/gui/css/webhelp.min.css">
      <script type="text/javascript" src="themes/gui/js/webhelp.min.js"></script>
      </head>
   <body>
      <div id="wrapper">
         <!--ZOOMSTOP-->
         <div id="sidebar-wrapper" class="user dynamic-toc"></div>
         <!--ZOOMRESTART-->
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="page concept  - topic-topic concept-concept " id="frequently-asked-questions">
                        <!--ZOOMSTOP--><a href="#menu-toggle" class="btn btn-primary" id="menu-toggle">Toggle Menu</a><!--ZOOMRESTART--><h1 class="title topictitle1">Frequently Asked Questions</h1>
                        <div class="body conbody">
                           <p class="p"><strong class="ph b">FAQ</strong></p>
                           
                           <ul class="ul">
                              <li class="li">
                                 <p class="p"><span class="ph refid" id="frequently-asked-questions__frequently-asked-questions">Frequently Asked Questions</span></p>
                                 
                                 <ul class="ul">
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__is-salt-open-core">Is Salt open-core?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__what-ports-should-i-open-on-my-firewall">What ports should I open on my firewall?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__i-m-seeing-weird-behavior-including-but-not-limited-to-packages-not-installing-their-users-properly">I'm seeing weird behavior (including but not limited to packages not installing their
                                             users properly)</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__my-script-runs-every-time-i-run-a-state-highstate-why">My script runs every time I run a state.highstate. Why?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__when-i-run-test-ping-why-don-t-the-minions-that-aren-t-responding-return-anything-returning-false-would-be-helpful">When I run test.ping, why don't the Minions that aren't responding return anything?
                                             Returning False would be helpful.</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__how-does-salt-determine-the-minion-s-id">How does Salt determine the Minion's id?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__i-m-trying-to-manage-packages-services-but-i-get-an-error-saying-that-the-state-is-not-available-why">I'm trying to manage packages/services but I get an error saying that the state is
                                             not available. Why?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__i-m-using-gitfs-and-my-custom-modules-states-etc-are-not-syncing-why">I'm using gitfs and my custom modules/states/etc are not syncing. Why?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__why-aren-t-my-custom-modules-states-etc-available-on-my-minions">Why aren't my custom modules/states/etc. available on my Minions?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__module-x-isn-t-available-even-though-the-shell-command-it-uses-is-installed-why">Module X isn't available, even though the shell command it uses is installed. Why?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__can-i-run-different-versions-of-salt-on-my-master-and-minion">Can I run different versions of Salt on my Master and Minion?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__does-salt-support-backing-up-managed-files">Does Salt support backing up managed files?</span></p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__what-is-the-best-way-to-restart-a-salt-daemon-using-salt">What is the best way to restart a Salt daemon using Salt?</span></p>
                                       
                                       <ul class="ul">
                                          <li class="li">
                                             <p class="p"><span class="ph refid" id="frequently-asked-questions__linux-unix">Linux/Unix</span></p>
                                             
                                          </li>
                                          
                                          <li class="li">
                                             <p class="p"><span class="ph refid" id="frequently-asked-questions__windows">Windows</span></p>
                                             
                                          </li>
                                          
                                       </ul>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p"><span class="ph refid" id="frequently-asked-questions__salting-the-salt-master">Salting the Salt Master</span></p>
                                       
                                    </li>
                                    
                                 </ul>
                                 
                              </li>
                              
                           </ul>
                           
                           <div class="section" id="frequently-asked-questions__is-salt-open-core">
                              <h2 class="title sectiontitle">Is Salt open-core?</h2>
                              <p class="p">No. Salt is 100% committed to being open-source, including all of our APIs and
                                 the <a class="xref" href="https://github.com/saltstack/halite" target="_blank">'Halite' web interface</a> which was introduced in version 0.17.0. It is
                                 developed under the <a class="xref" href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache 2.0 license</a>, allowing it to be used in both open
                                 and proprietary projects.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__what-ports-should-i-open-on-my-firewall">
                              <h2 class="title sectiontitle">What ports should I open on my firewall?</h2>
                              <p class="p">Minions need to be able to connect to the Master on TCP ports 4505 and 4506.
                                 Minions do not need any inbound ports open. More detailed information on
                                 firewall settings can be found 
                                 		
                                 			&nbsp;<a class="xref" href="topics/tutorials/firewall.html#opening-the-firewall-up-for-salt">here</a>.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__i-m-seeing-weird-behavior-including-but-not-limited-to-packages-not-installing-their-users-properly">
                              <h2 class="title sectiontitle">I'm seeing weird behavior (including but not limited to packages not installing their
                                 users properly)
                              </h2>
                              <p class="p">This is often caused by SELinux.  Try disabling SELinux or putting it in
                                 permissive mode and see if the weird behavior goes away.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__my-script-runs-every-time-i-run-a-state-highstate-why">
                              <h2 class="title sectiontitle">My script runs every time I run a state.highstate. Why?</h2>
                              <p class="p">You are probably using 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/all/salt.states.cmd.html#salt.states.cmd.run">cmd.run</a> rather than
                                 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/all/salt.states.cmd.html#salt.states.cmd.wait">cmd.wait</a>. A 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/all/salt.states.cmd.html#salt.states.cmd.wait">cmd.wait</a> state will only run when there has been a change in a
                                 state that it is watching.
                              </p>
                              
                              <p class="p">A 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/all/salt.states.cmd.html#salt.states.cmd.run">cmd.run</a> state will run the corresponding command
                                 <em class="ph i">every time</em> (unless it is prevented from running by the <tt class="ph tt">unless</tt> or <tt class="ph tt">onlyif</tt>
                                 arguments).
                              </p>
                              
                              <p class="p">More details can be found in the documentation for the 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/all/salt.states.cmd.html#salt.states.cmd">cmd</a> states.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__when-i-run-test-ping-why-don-t-the-minions-that-aren-t-responding-return-anything-returning-false-would-be-helpful">
                              <h2 class="title sectiontitle">When I run test.ping, why don't the Minions that aren't responding return anything?
                                 Returning False would be helpful.
                              </h2>
                              <p class="p">When you run <em class="ph i">test.ping</em> the Master tells Minions to run commands/functions,
                                 and listens for the return data, printing it to the screen when it is received.
                                 If it doesn't receive anything back, it doesn't have anything to display for
                                 that Minion.
                              </p>
                              
                              <p class="p">There are a couple options for getting information on Minions that are not
                                 responding. One is to use the verbose (<tt class="ph tt">-v</tt>) option when you run salt
                                 commands, as it will display "Minion did not return" for any Minions which time
                                 out.
                              </p>
                              <pre class="pre codeblock language-bash">salt -v '*' pkg.install zsh</pre>
                              <p class="p">Another option is to use the 
                                 		
                                 			&nbsp;<a class="xref" href="ref/runners/all/salt.runners.manage.html#salt.runners.manage.down">manage.down</a>
                                 runner:
                              </p>
                              <pre class="pre codeblock language-bash">salt-run manage.down</pre>
                              <p class="p">Also, if the Master is under heavy load, it is possible that the CLI will exit
                                 without displaying return data for all targeted Minions. However, this doesn't
                                 mean that the Minions did not return; this only means that the Salt CLI timed
                                 out waiting for a response. Minions will still send their return data back to
                                 the Master once the job completes. If any expected Minions are missing from the
                                 CLI output, the 
                                 		
                                 			&nbsp;<a class="xref" href="ref/runners/all/salt.runners.jobs.html#salt.runners.jobs.list_jobs">jobs.list_jobs</a> runner can
                                 be used to show the job IDs of the jobs that have been run, and the
                                 
                                 		
                                 			&nbsp;<a class="xref" href="ref/runners/all/salt.runners.jobs.html#salt.runners.jobs.lookup_jid">jobs.lookup_jid</a> runner can be used to get
                                 the return data for that job.
                              </p>
                              <pre class="pre codeblock language-bash">salt-run jobs.list_jobs
salt-run jobs.lookup_jid 20130916125524463507</pre>
                              <p class="p">If you find that you are often missing Minion return data on the CLI, only to
                                 find it with the jobs runners, then this may be a sign that the
                                 
                                 		
                                 			&nbsp;<a class="xref" href="ref/configuration/master.html#configuration-salt-master__worker_threads">worker_threads</a> value may need to be increased in the master
                                 config file. Additionally, running your Salt CLI commands with the <tt class="ph tt">-t</tt>
                                 option will make Salt wait longer for the return data before the CLI command
                                 exits. For instance, the below command will wait up to 60 seconds for the
                                 Minions to return:
                              </p>
                              <pre class="pre codeblock language-bash">salt -t 60 '*' test.ping</pre>
                              </div>
                           
                           <div class="section" id="frequently-asked-questions__how-does-salt-determine-the-minion-s-id">
                              <h2 class="title sectiontitle">How does Salt determine the Minion's id?</h2>
                              <p class="p">If the Minion id is not configured explicitly (using the 
                                 		
                                 			&nbsp;<a class="xref" href="ref/configuration/minion.html#configuration-salt-minion__id">id</a>
                                 parameter), Salt will determine the id based on the hostname. Exactly how this
                                 is determined varies a little between operating systems and is described in
                                 detail 
                                 		
                                 			&nbsp;<a class="xref" href="topics/tutorials/walkthrough.html#saltstack-walk-through__minion-id-generation">here</a>.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__i-m-trying-to-manage-packages-services-but-i-get-an-error-saying-that-the-state-is-not-available-why">
                              <h2 class="title sectiontitle">I'm trying to manage packages/services but I get an error saying that the state is
                                 not available. Why?
                              </h2>
                              <p class="p">Salt detects the Minion's operating system and assigns the correct package or
                                 service management module based on what is detected. However, for certain custom
                                 spins and OS derivatives this detection fails. In cases like this, an issue
                                 should be opened on our <a class="xref" href="https://github.com/saltstack/salt/issues" target="_blank">tracker</a>, with the following information:
                              </p>
                              
                              <ol class="ol">
                                 <li class="li">
                                    <p class="p">The output of the following command:</p>
                                    <pre class="pre codeblock language-bash">salt &lt;minion_id&gt; grains.items | grep os</pre>
                                    </li>
                                 
                                 <li class="li">
                                    <p class="p">The contents of <tt class="ph tt">/etc/lsb-release</tt>, if present on the Minion.
                                    </p>
                                    
                                 </li>
                                 
                              </ol>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__i-m-using-gitfs-and-my-custom-modules-states-etc-are-not-syncing-why">
                              <h2 class="title sectiontitle">I'm using gitfs and my custom modules/states/etc are not syncing. Why?</h2>
                              <p class="p">In versions of Salt 0.16.3 or older, there is a bug in 
                                 		
                                 			&nbsp;<a class="xref" href="topics/tutorials/gitfs.html#tutorial-gitfs">gitfs</a> which can affect the syncing of custom types.
                                 Upgrading to 0.16.4 or newer will fix this.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__why-aren-t-my-custom-modules-states-etc-available-on-my-minions">
                              <h2 class="title sectiontitle">Why aren't my custom modules/states/etc. available on my Minions?</h2>
                              <p class="p">Custom modules are only synced to Minions when 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.state.html#salt.modules.state.highstate">state.highstate</a>, 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.sync_modules">saltutil.sync_modules</a>, or 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.sync_all">saltutil.sync_all</a> is run. Similarly, custom states are only
                                 synced to Minions when 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.state.html#salt.modules.state.highstate">state.highstate</a>,
                                 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.sync_states">saltutil.sync_states</a>, or
                                 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.sync_all">saltutil.sync_all</a> is run.
                              </p>
                              
                              <p class="p">Other custom types (renderers, outputters, etc.) have similar behavior, see the
                                 documentation for the 
                                 		
                                 			&nbsp;<a class="xref" href="ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil">saltutil</a> module for more
                                 information.
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__module-x-isn-t-available-even-though-the-shell-command-it-uses-is-installed-why">
                              <h2 class="title sectiontitle">Module X isn't available, even though the shell command it uses is installed. Why?</h2>
                              <p class="p">This is most likely a PATH issue. Did you custom-compile the software which the
                                 module requires? RHEL/CentOS/etc. in particular override the root user's path
                                 in <tt class="ph tt">/etc/init.d/functions</tt>, setting it to <tt class="ph tt">/sbin:/usr/sbin:/bin:/usr/bin</tt>,
                                 making software installed into <tt class="ph tt">/usr/local/bin</tt> unavailable to Salt when the
                                 Minion is started using the initscript. In version 2014.1.0, Salt will have a
                                 better solution for these sort of PATH-related issues, but recompiling the
                                 software to install it into a location within the PATH should resolve the
                                 issue in the meantime. Alternatively, you can create a symbolic link within the
                                 PATH using a 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/all/salt.states.file.html#salt.states.file.symlink">file.symlink</a> state.
                              </p>
                              <pre class="pre codeblock language-yaml">/usr/bin/foo:
  file.symlink:
    - target: /usr/local/bin/foo</pre>
                              </div>
                           
                           <div class="section" id="frequently-asked-questions__can-i-run-different-versions-of-salt-on-my-master-and-minion">
                              <h2 class="title sectiontitle">Can I run different versions of Salt on my Master and Minion?</h2>
                              <p class="p">This depends on the versions.  In general, it is recommended that Master and
                                 Minion versions match.
                              </p>
                              
                              <p class="p">When upgrading Salt, the master(s) should always be upgraded first.  Backwards
                                 compatibility for minions running newer versions of salt than their masters is
                                 not guaranteed.
                              </p>
                              
                              <p class="p">Whenever possible, backwards compatibility between new masters
                                 and old minions will be preserved.  Generally, the only exception to this
                                 policy is in case of a security vulnerability.
                              </p>
                              
                              <p class="p">Recent examples of backwards compatibility breakage include the 0.17.1 release
                                 (where all backwards compatibility was broken due to a security fix), and the
                                 2014.1.0 release (which retained compatibility between 2014.1.0 masters and
                                 0.17 minions, but broke compatibility for 2014.1.0 minions and older masters).
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__does-salt-support-backing-up-managed-files">
                              <h2 class="title sectiontitle">Does Salt support backing up managed files?</h2>
                              <p class="p">Yes. Salt provides an easy to use addition to your file.managed states that
                                 allow you to back up files via 
                                 		
                                 			&nbsp;<a class="xref" href="ref/states/backup_mode.html#file-state-backups">backup_mode</a>,
                                 backup_mode can be configured on a per state basis, or in the minion config
                                 (note that if set in the minion config this would simply be the default
                                 method to use, you still need to specify that the file should be backed up!).
                              </p>
                              
                           </div>
                           
                           <div class="section" id="frequently-asked-questions__what-is-the-best-way-to-restart-a-salt-daemon-using-salt">
                              <h2 class="title sectiontitle">What is the best way to restart a Salt daemon using Salt?</h2>
                              <p class="p">Updating the salt-minion package requires a restart of the salt-minion service.
                                 But restarting the service while in the middle of a state run interrupts the
                                 process of the minion running states and sending results back to the master.
                                 It's a tricky problem to solve, and we're working on it, but in the meantime
                                 one way of handling this (on Linux and UNIX-based operating systems) is to use
                                 <strong class="ph b">at</strong> (a job scheduler which predates cron) to schedule a restart of the
                                 service. <strong class="ph b">at</strong> is not installed by default on most distros, and requires a
                                 service to be running (usually called <strong class="ph b">atd</strong>) in order to schedule jobs.
                                 Here's an example of how to upgrade the salt-minion package at the end of a
                                 Salt run, and schedule a service restart for one minute after the package
                                 update completes.
                              </p>
                              
                           </div>
                           
                           <div class="section head3" id="frequently-asked-questions__linux-unix">
                              <h2 class="title sectiontitle">Linux/Unix</h2><pre class="pre codeblock language-yaml">salt-minion:
  pkg.installed:
    - name: salt-minion
    - version: 2014.1.7-3.el6
    - order: last
  service.running:
    - name: salt-minion
    - require:
      - pkg: salt-minion
  cmd.wait:
    - name: echo service salt-minion restart | at now + 1 minute
    - watch:
      - pkg: salt-minion</pre>
                              <p class="p">To ensure that <strong class="ph b">at</strong> is installed and <strong class="ph b">atd</strong> is running, the following states
                                 can be used (be sure to double-check the package name and service name for the
                                 distro the minion is running, in case they differ from the example below.
                              </p>
                              <pre class="pre codeblock language-yaml">at:
  pkg.installed:
    - name: at
  service.running:
    - name: atd
    - enable: True</pre>
                              <p class="p">An alternatvie to using the atd daemon is to fork and disown the
                                 process.
                              </p>
                              <pre class="pre codeblock language-yaml">restart_minion:
  cmd.run:
    - name: |
        nohup /bin/sh -c 'sleep 10 &amp;&amp; salt-call --local service.restart salt-minion'
    - python_shell: True
    - order: last</pre>
                              </div>
                           
                           <div class="section head3" id="frequently-asked-questions__windows">
                              <h2 class="title sectiontitle">Windows</h2>
                              <p class="p">For Windows machines, restarting the minion at can be accomplished by
                                 adding the following state:
                              </p>
                              <pre class="pre codeblock language-yaml">schedule-start:
  cmd.run:
    - name: 'start powershell "Restart-Service -Name salt-minion"'
    - order: last</pre>
                              <p class="p">or running immediately from the command line:</p>
                              <pre class="pre codeblock language-bash">salt -G kernel:Windows cmd.run 'start powershell "Restart-Service -Name salt-minion"'</pre>
                              </div>
                           
                           <div class="section" id="frequently-asked-questions__salting-the-salt-master">
                              <h2 class="title sectiontitle">Salting the Salt Master</h2>
                              <p class="p">In order to configure a master server via states, the Salt master can also be
                                 "salted" in order to enforce state on the Salt master as well as the Salt
                                 minions. Salting the Salt master requires a Salt minion to be installed on
                                 the same machine as the Salt master. Once the Salt minion is installed, the
                                 minion configuration file must be pointed to the local Salt master:
                              </p>
                              <pre class="pre codeblock language-yaml">master: 127.0.0.1</pre>
                              <p class="p">Once the Salt master has been "salted" with a Salt minion, it can be targeted
                                 just like any other minion. If the minion on the salted master is running, the
                                 minion can be targeted via any usual <tt class="ph tt">salt</tt> command. Additionally, the
                                 <tt class="ph tt">salt-call</tt> command can execute operations to enforce state on the salted
                                 master without requiring the minion to be running.
                              </p>
                              
                              <p class="p">More information about salting the Salt master can be found in the salt-formula
                                 for salt itself:
                              </p>
                              
                              <p class="p"><a class="xref" href="https://github.com/saltstack-formulas/salt-formula" target="_blank">https://github.com/saltstack-formulas/salt-formula</a></p>
                              
                           </div>
                           
                        </div>
                        
                     </div>
                     <button id="next-button" type="button" class="btn btn-primary">
                        Next <span class="glyphicon glyphicon-chevron-right"></span></button><div class="footer">

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>