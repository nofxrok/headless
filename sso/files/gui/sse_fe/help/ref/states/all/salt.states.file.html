<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>salt.states.file</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="reference">
      
      <meta name="DC.Title" content="salt.states.file">
      
      <meta name="DC.Relation" scheme="URI" content="../../state-modules.html">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="salt-states-file">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/gui/css/core.min.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/gui/css/webhelp.min.css">
      <script type="text/javascript" src="../../../themes/gui/js/webhelp.min.js"></script>
      </head>
   <body>
      <div id="wrapper">
         <!--ZOOMSTOP-->
         <div id="sidebar-wrapper" class="reference dynamic-toc"></div>
         <!--ZOOMRESTART-->
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="page reference  - topic-topic       reference-reference " id="salt-states-file">
                        <!--ZOOMSTOP--><a href="#menu-toggle" class="btn btn-primary" id="menu-toggle">Toggle Menu</a><!--ZOOMRESTART--><h1 class="title topictitle1">salt.states.file</h1>
                        <div class="body refbody">
                           <div class="section">
                              <p class="p ids"><span class="ph" id="salt-states-file__module-salt.states.file"></span></p>
                              
                           </div>
                           
                        </div>
                        
                        <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="related-links"></div>
                        <div class="topic reference nested1" id="operations-on-regular-files-special-files-directories-and-symlinks">
                           <h2 class="title topictitle2">Operations on regular files, special files, directories, and symlinks</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <p class="p">Salt States can aggressively manipulate files on a system. There are a number
                                    of ways in which files can be managed.
                                 </p>
                                 
                                 <p class="p">Regular files can be enforced with the <a class="xref" href="salt.states.file.html#salt.states.file.managed">file.managed</a> state. This state downloads files from the salt
                                    master and places them on the target system. Managed files can be rendered as a
                                    jinja, mako, or wempy template, adding a dynamic component to file management.
                                    An example of <a class="xref" href="salt.states.file.html#salt.states.file.managed">file.managed</a> which makes use of
                                    the jinja templating system would look like this:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/etc/http/conf/http.conf:
  file.managed:
    - source: salt://apache/http.conf
    - user: root
    - group: root
    - mode: 644
    - template: jinja
    - defaults:
        custom_var: "default value"
        other_var: 123
{% if grains['os'] == 'Ubuntu' %}
    - context:
        custom_var: "override"
{% endif %}</pre>
                                 <p class="p">It is also possible to use the 
                                    		
                                    			&nbsp;<a class="xref" href="../../renderers/all/salt.renderers.py.html#salt.renderers.py">py renderer</a> as a
                                    templating option. The template would be a python script which would need to
                                    contain a function called <tt class="ph tt">run()</tt>, which returns a string. The returned
                                    string will be the contents of the managed file. For example:
                                 </p>
                                 <pre class="pre codeblock language-python">def run():
    lines = ('foo', 'bar', 'baz')
    return '\n\n'.join(lines)</pre>
                                 <aside class="note "><span class="glyphicon glyphicon-check"></span><span class="title">Note:</span> 
                                    <p class="p">When using both the <tt class="ph tt">defaults</tt> and <tt class="ph tt">context</tt> arguments, note the extra
                                       indentation (four spaces instead of the normal two). This is due to an
                                       idiosyncrasy of how PyYAML loads nested dictionaries, and is explained in
                                       greater detail 
                                       		
                                       			&nbsp;<a class="xref" href="../../../topics/troubleshooting/yaml_idiosyncrasies.html#yaml-idiosyncrasies__nested-dict-indentation">here</a>.
                                    </p>
                                    
                                 </aside>
                                 
                                 <p class="p">If using a template, any user-defined template variables in the file defined in
                                    <tt class="ph tt">source</tt> must be passed in using the <tt class="ph tt">defaults</tt> and/or <tt class="ph tt">context</tt>
                                    arguments. The general best practice is to place default values in
                                    <tt class="ph tt">defaults</tt>, with conditional overrides going into <tt class="ph tt">context</tt>, as seen above.
                                 </p>
                                 
                                 <p class="p">The template will receive a variable <tt class="ph tt">custom_var</tt>, which would be accessed in
                                    the template using <tt class="ph tt">{{ custom_var }}</tt>. If the operating system is Ubuntu, the
                                    value of the variable <tt class="ph tt">custom_var</tt> would be <em class="ph i">override</em>, otherwise it is the
                                    default <em class="ph i">default value</em></p>
                                 
                                 <p class="p">The <tt class="ph tt">source</tt> parameter can be specified as a list. If this is done, then the
                                    first file to be matched will be the one that is used. This allows you to have
                                    a default file on which to fall back if the desired file does not exist on the
                                    salt fileserver. Here's an example:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/etc/foo.conf:
  file.managed:
    - source:
      - salt://foo.conf.{{ grains['fqdn'] }}
      - salt://foo.conf.fallback
    - user: foo
    - group: users
    - mode: 644
    - backup: minion</pre>
                                 <aside class="note "><span class="glyphicon glyphicon-check"></span><span class="title">Note:</span> 
                                    <p class="p">Salt supports backing up managed files via the backup option. For more
                                       details on this functionality please review the
                                       
                                       		
                                       			&nbsp;<a class="xref" href="../backup_mode.html#file-state-backups">backup_mode documentation</a>.
                                    </p>
                                    
                                 </aside>
                                 
                                 <p class="p">The <tt class="ph tt">source</tt> parameter can also specify a file in another Salt environment.
                                    In this example <tt class="ph tt">foo.conf</tt> in the <tt class="ph tt">dev</tt> environment will be used instead.
                                 </p>
                                 <pre class="pre codeblock language-yaml">/etc/foo.conf:
  file.managed:
    - source:
      - salt://foo.conf?saltenv=dev
    - user: foo
    - group: users
    - mode: '0644'</pre>
                                 <aside class="important "><span class="glyphicon glyphicon-exclamation-sign"></span><span class="title">Important:</span> 
                                    <p class="p">When using a mode that includes a leading zero you must wrap the
                                       value in single quotes. If the value is not wrapped in quotes it
                                       will be read by YAML as an integer and evaluated as an octal.
                                    </p>
                                    
                                 </aside>
                                 
                                 <p class="p">Special files can be managed via the <tt class="ph tt">mknod</tt> function. This function will
                                    create and enforce the permissions on a special file. The function supports the
                                    creation of character devices, block devices, and fifo pipes. The function will
                                    create the directory structure up to the special file if it is needed on the
                                    minion. The function will not overwrite or operate on (change major/minor
                                    numbers) existing special files with the exception of user, group, and
                                    permissions. In most cases the creation of some special files require root
                                    permisisons on the minion. This would require that the minion to be run as the
                                    root user. Here is an example of a character device:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/var/named/chroot/dev/random:
  file.mknod:
    - ntype: c
    - major: 1
    - minor: 8
    - user: named
    - group: named
    - mode: 660</pre>
                                 <p class="p">Here is an example of a block device:</p>
                                 <pre class="pre codeblock language-yaml">/var/named/chroot/dev/loop0:
  file.mknod:
    - ntype: b
    - major: 7
    - minor: 0
    - user: named
    - group: named
    - mode: 660</pre>
                                 <p class="p">Here is an example of a fifo pipe:</p>
                                 <pre class="pre codeblock language-yaml">/var/named/chroot/var/log/logfifo:
  file.mknod:
    - ntype: p
    - user: named
    - group: named
    - mode: 660</pre>
                                 <p class="p">Directories can be managed via the <tt class="ph tt">directory</tt> function. This function can
                                    create and enforce the permissions on a directory. A directory statement will
                                    look like this:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/srv/stuff/substuf:
  file.directory:
    - user: fred
    - group: users
    - mode: 755
    - makedirs: True</pre>
                                 <p class="p">If you need to enforce user and/or group ownership or permissions recursively
                                    on the directory's contents, you can do so by adding a <tt class="ph tt">recurse</tt> directive:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/srv/stuff/substuf:
  file.directory:
    - user: fred
    - group: users
    - mode: 755
    - makedirs: True
    - recurse:
      - user
      - group
      - mode</pre>
                                 <p class="p">As a default, <tt class="ph tt">mode</tt> will resolve to <tt class="ph tt">dir_mode</tt> and <tt class="ph tt">file_mode</tt>, to
                                    specify both directory and file permissions, use this form:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/srv/stuff/substuf:
  file.directory:
    - user: fred
    - group: users
    - file_mode: 744
    - dir_mode: 755
    - makedirs: True
    - recurse:
      - user
      - group
      - mode</pre>
                                 <p class="p">Symlinks can be easily created; the symlink function is very simple and only
                                    takes a few arguments:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/etc/grub.conf:
  file.symlink:
    - target: /boot/grub/grub.conf</pre>
                                 <p class="p">Recursive directory management can also be set via the <tt class="ph tt">recurse</tt>
                                    function. Recursive directory management allows for a directory on the salt
                                    master to be recursively copied down to the minion. This is a great tool for
                                    deploying large code and configuration systems. A state using <tt class="ph tt">recurse</tt>
                                    would look something like this:
                                 </p>
                                 <pre class="pre codeblock language-yaml">/opt/code/flask:
  file.recurse:
    - source: salt://code/flask
    - include_empty: True</pre>
                                 <p class="p">A more complex <tt class="ph tt">recurse</tt> example:
                                 </p>
                                 <pre class="pre codeblock language-yaml">{% set site_user = 'testuser' %}
{% set site_name = 'test_site' %}
{% set project_name = 'test_proj' %}
{% set sites_dir = 'test_dir' %}

django-project:
  file.recurse:
    - name: {{ sites_dir }}/{{ site_name }}/{{ project_name }}
    - user: {{ site_user }}
    - dir_mode: 2775
    - file_mode: '0644'
    - template: jinja
    - source: salt://project/templates_dir
    - include_empty: True</pre>
                                 </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.absent">
                              <h3 class="title topictitle3">absent</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.absent(
								name
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Make sure that the named file or directory is absent. If it exists, it will
                                       be deleted. This will work to reverse any of the functions in the file
                                       state module.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e219" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e221" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e219" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e221" class="stentry propdesc">
                                          <p class="p">The path which should be deleted</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.accumulated">
                              <h3 class="title topictitle3">accumulated</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.accumulated(
								name,
								filename,
								text,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Prepare accumulator which can be used in template in file.managed state.
                                       Accumulator dictionary becomes available in template. It can also be used
                                       in file.blockreplace.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e257" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e259" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e257" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e259" class="stentry propdesc">
                                          <p class="p">Accumulator name</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e257" class="stentry propvalue">filename</td>
                                       
                                       <td valign="top" headers="d372276e259" class="stentry propdesc">
                                          <p class="p">Filename which would receive this accumulator (see file.managed state
                                             documentation about <tt class="ph tt">name</tt>)
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e257" class="stentry propvalue">text</td>
                                       
                                       <td valign="top" headers="d372276e259" class="stentry propdesc">
                                          <p class="p">String or list for adding in accumulator</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e257" class="stentry propvalue">require_in / watch_in</td>
                                       
                                       <td valign="top" headers="d372276e259" class="stentry propdesc">
                                          <p class="p">One of them required for sure we fill up accumulator before we manage
                                             the file. Probably the same as filename
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Example:</p>
                                    
                                    <p class="p">Given the following:</p>
                                    <pre class="pre codeblock language-yaml">animals_doing_things:
  file.accumulated:
    - filename: /tmp/animal_file.txt
    - text: ' jumps over the lazy dog.'
    - require_in:
      - file: animal_file

animal_file:
  file.managed:
    - name: /tmp/animal_file.txt
    - source: salt://animal_file.txt
    - template: jinja</pre>
                                    <p class="p">One might write a template for <tt class="ph tt">animal_file.txt</tt> like the following:
                                    </p>
                                    <pre class="pre codeblock language-python jinja">The quick brown fox{% for animal in accumulator['animals_doing_things'] %}{{ animal }}{% endfor %}</pre>
                                    <p class="p">Collectively, the above states and template file will produce:</p>
                                    <pre class="pre codeblock language-text">The quick brown fox jumps over the lazy dog.</pre>
                                    <p class="p">Multiple accumulators can be "chained" together.</p>
                                    
                                    <aside class="note "><span class="glyphicon glyphicon-check"></span><span class="title">Note:</span> 
                                       <p class="p">The 'accumulator' data structure is a Python dictionary.
                                          Do not expect any loop over the keys in a deterministic order!
                                       </p>
                                       
                                    </aside>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.append">
                              <h3 class="title topictitle3">append</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.append(
								name,
								text=None,
								makedirs=False,
								source=None,
								source_hash=None,
								template='jinja',
								sources=None,
								source_hashes=None,
								defaults=None,
								context=None
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Ensure that some text appears at the end of a file.</p>
                                    
                                    <p class="p">The text will not be appended if it already exists in the file.
                                       A single string of text or a list of strings may be appended.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e343" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e345" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">The location of the file to append to.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">text</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">The text to be appended, which can be a single string or a list
                                             of strings.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">If the file is located in a path without a parent directory,
                                             then the state will fail. If makedirs is set to True, then
                                             the parent directories will be created to facilitate the
                                             creation of the named file. Defaults to False.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">source</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">A single source file to append. This source file can be hosted on either
                                             the salt master server, or on an HTTP or FTP server. Both HTTPS and
                                             HTTP are supported as well as downloading directly from Amazon S3
                                             compatible URLs with both pre-configured and automatic IAM credentials
                                             (see s3.get state documentation). File retrieval from Openstack Swift
                                             object storage is supported via swift://container/object_path URLs
                                             (see swift.get documentation).
                                          </p>
                                          
                                          <p class="p">For files hosted on the salt file server, if the file is located on
                                             the master in the directory named spam, and is called eggs, the source
                                             string is salt://spam/eggs.
                                          </p>
                                          
                                          <p class="p">If the file is hosted on an HTTP or FTP server, the source_hash argument
                                             is also required.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">source_hash</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm">This can be one of the following:</dt>
                                             
                                             <dd class="dd">
                                                <ol class="ol">
                                                   <li class="li">
                                                      <p class="p">a source hash string</p>
                                                      
                                                   </li>
                                                   
                                                   <li class="li">
                                                      <p class="p">the URI of a file that contains source hash strings</p>
                                                      
                                                   </li>
                                                   
                                                </ol>
                                                
                                             </dd>
                                             
                                          </dl>
                                          
                                          <p class="p">The function accepts the first encountered long unbroken alphanumeric
                                             string of correct length as a valid hash, in order from most secure to
                                             least secure:
                                          </p>
                                          <pre class="pre codeblock language-text">Type    Length
======  ======
sha512     128
sha384      96
sha256      64
sha224      56
sha1        40
md5         32</pre>
                                          <p class="p">The file can contain several checksums for several files. Each line
                                             must contain both the file name and the hash.  If no file name is
                                             matched, the first hash encountered will be used, otherwise the most
                                             secure hash with the correct source file name will be used.
                                          </p>
                                          
                                          <p class="p">Debian file type <tt class="ph tt">*.dsc</tt> is supported.
                                          </p>
                                          
                                          <p class="p">Examples:</p>
                                          <pre class="pre codeblock language-text">/etc/rc.conf ef6e82e4006dee563d98ada2a2a80a27
sha254c8525aee419eb649f0233be91c151178b30f0dff8ebbdcc8de71b1d5c8bcc06a  /etc/resolv.conf
ead48423703509d37c4a90e6a0d53e143b6fc268</pre>
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm">Known issues:</dt>
                                             
                                             <dd class="dd">
                                                <p class="p">If the remote server URL has the hash file as an apparent
                                                   sub-directory of the source file, the module will discover that it
                                                   has already cached a directory where a file should be cached. For
                                                   example:
                                                </p>
                                                <pre class="pre codeblock language-yaml">tomdroid-src-0.7.3.tar.gz:
  file.managed:
    - name: /tmp/tomdroid-src-0.7.3.tar.gz
    - source: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.tar.gz
    - source_hash: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.tar.gz/+md5</pre>
                                                </dd>
                                             
                                          </dl>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">template</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">The named templating engine will be used to render the appended-to
                                             file. Defaults to jinja.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">sources</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">A list of source files to append. If the files are hosted on an HTTP or
                                             FTP server, the source_hashes argument is also required.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">source_hashes</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">A list of source_hashes corresponding to the sources list specified in
                                             the sources argument.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">defaults</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">Default context passed to the template.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e343" class="stentry propvalue">context</td>
                                       
                                       <td valign="top" headers="d372276e345" class="stentry propdesc">
                                          <p class="p">Overrides default context variables passed to the template.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Multi-line example:</p>
                                    <pre class="pre codeblock language-yaml">/etc/motd:
  file.append:
    - text: |
        Thou hadst better eat salt with the Philosophers of Greece,
        than sugar with the Courtiers of Italy.
        - Benjamin Franklin</pre>
                                    <p class="p">Multiple lines of text:</p>
                                    <pre class="pre codeblock language-yaml">/etc/motd:
  file.append:
    - text:
      - Trust no one unless you have eaten much salt with him.
      - "Salt is born of the purest of parents: the sun and the sea."</pre>
                                    <p class="p">Gather text from multiple template files:</p>
                                    <pre class="pre codeblock language-yaml">/etc/motd:
  file:
      - append
      - template: jinja
      - sources:
          - salt://motd/devops-messages.tmpl
          - salt://motd/hr-messages.tmpl
          - salt://motd/general-messages.tmpl</pre>
                                    <p class="p"><span class="keyword versionmodified">New in version 0.9.5.</span></p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.blockreplace">
                              <h3 class="title topictitle3">blockreplace</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.blockreplace(
								name,
								marker_start='#-- start managed zone --',
								marker_end='#-- end managed zone --',
								content='',
								append_if_not_found=False,
								prepend_if_not_found=False,
								backup='.bak',
								show_changes=True
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Maintain an edit in a file in a zone delimited by two line markers</p>
                                    
                                    <p class="p"><span class="keyword versionmodified">New in version 2014.1.0.</span></p>
                                    
                                    <p class="p">A block of content delimited by comments can help you manage several lines
                                       entries without worrying about old entries removal. This can help you
                                       maintaining an un-managed file containing manual edits.
                                       Note: this function will store two copies of the file in-memory
                                       (the original version and the edited version) in order to detect changes
                                       and only edit the targeted file if necessary.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e496" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e498" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">Filesystem path to the file to be edited</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">marker_start</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">The line content identifying a line as the start of the content block.
                                             Note that the whole line containing this marker will be considered, so
                                             whitespace or extra content before or after the marker is included in
                                             final output
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">marker_end</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">The line content identifying a line as the end of the content block.
                                             Note that the whole line containing this marker will be considered, so
                                             whitespace or extra content before or after the marker is included in
                                             final output. Note: you can use file.accumulated and target this state.
                                             All accumulated data dictionaries content will be added as new lines in
                                             the content
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">content</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">The content to be used between the two lines identified by marker_start
                                             and marker_stop
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">append_if_not_found</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">If markers are not found and set to True then the markers and content
                                             will be appended to the file. Default is <tt class="ph tt">False</tt></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">prepend_if_not_found</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">If markers are not found and set to True then the markers and content
                                             will be prepended to the file. Default is <tt class="ph tt">False</tt></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">backup</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">The file extension to use for a backup of the file if any edit is made.
                                             Set this to <tt class="ph tt">False</tt> to skip making a backup.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">dry_run</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">Don't make any edits to the file</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e496" class="stentry propvalue">show_changes</td>
                                       
                                       <td valign="top" headers="d372276e498" class="stentry propdesc">
                                          <p class="p">Output a unified diff of the old file and the new file. If <tt class="ph tt">False</tt>
                                             return a boolean if any changes were made
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Example of usage with an accumulator and with a variable:</p>
                                    <pre class="pre codeblock language-yaml">{% set myvar = 42 %}
hosts-config-block-{{ myvar }}:
  file.blockreplace:
    - name: /etc/hosts
    - marker_start: "# START managed zone {{ myvar }} -DO-NOT-EDIT-"
    - marker_end: "# END managed zone {{ myvar }} --"
    - content: 'First line of content'
    - append_if_not_found: True
    - backup: '.bak'
    - show_changes: True

hosts-config-block-{{ myvar }}-accumulated1:
  file.accumulated:
    - filename: /etc/hosts
    - name: my-accumulator-{{ myvar }}
    - text: "text 2"
    - require_in:
      - file: hosts-config-block-{{ myvar }}

hosts-config-block-{{ myvar }}-accumulated2:
  file.accumulated:
    - filename: /etc/hosts
    - name: my-accumulator-{{ myvar }}
    - text: |
         text 3
         text 4
    - require_in:
      - file: hosts-config-block-{{ myvar }}</pre>
                                    <p class="p">will generate and maintain a block of content in <tt class="ph tt">/etc/hosts</tt>:
                                    </p>
                                    <pre class="pre codeblock language-text"># START managed zone 42 -DO-NOT-EDIT-
First line of content
text 2
text 3
text 4
# END managed zone 42 --</pre>
                                    </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.comment">
                              <h3 class="title topictitle3">comment</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.comment(
								name,
								regex,
								char='#',
								backup='.bak'
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Comment out specified lines in a file.</p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e606" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e608" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e606" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e608" class="stentry propdesc">
                                          <p class="p">The full path to the file to be edited</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e606" class="stentry propvalue">regex</td>
                                       
                                       <td valign="top" headers="d372276e608" class="stentry propdesc">
                                          <p class="p">A regular expression used to find the lines that are to be commented;
                                             this pattern will be wrapped in parenthesis and will move any
                                             preceding/trailing <tt class="ph tt">^</tt> or <tt class="ph tt">$</tt> characters outside the parenthesis
                                             (e.g., the pattern <tt class="ph tt">^foo$</tt> will be rewritten as <tt class="ph tt">^(foo)$</tt>)
                                             Note that you _need_ the leading ^, otherwise each time you run
                                             highstate, another comment char will be inserted.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e606" class="stentry propvalue">char</td>
                                       
                                       <td valign="top" headers="d372276e608" class="stentry propdesc">
                                          <p class="p">The character to be inserted at the beginning of a line in order to
                                             comment it out
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e606" class="stentry propvalue">backup</td>
                                       
                                       <td valign="top" headers="d372276e608" class="stentry propdesc">
                                          <p class="p">The file will be backed up before edit with this file extension</p>
                                          
                                          <aside class="important "><span class="glyphicon glyphicon-exclamation-sign"></span><span class="title">Important:</span> 
                                             <p class="p">This backup will be overwritten each time <tt class="ph tt">sed</tt> / <tt class="ph tt">comment</tt> /
                                                <tt class="ph tt">uncomment</tt> is called. Meaning the backup will only be useful
                                                after the first invocation.
                                             </p>
                                             
                                          </aside>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Usage:</p>
                                    <pre class="pre codeblock language-yaml">/etc/fstab:
  file.comment:
    - regex: ^bind 127.0.0.1</pre>
                                    <p class="p"><span class="keyword versionmodified">New in version 0.9.5.</span></p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.copy">
                              <h3 class="title topictitle3">copy</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.copy(
								name,
								source,
								force=False,
								makedirs=False,
								preserve=False,
								user=None,
								group=None,
								mode=None,
								subdir=False,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">If the source file exists on the system, copy it to the named file. The
                                       named file will not be overwritten if it already exists unless the force
                                       option is set to True.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e696" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e698" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p">The location of the file to copy to</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">source</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p">The location of the file to copy to the location specified with name</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">force</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p">If the target location is present then the file will not be moved,
                                             specify "force: True" to overwrite the target file
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p">If the target subdirectories don't exist create them</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">preserve</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2015.2.0.</span></p>
                                          
                                          <p class="p">Set <tt class="ph tt">preserve: True</tt> to preserve user/group ownership and mode
                                             after copying. Default is <tt class="ph tt">False</tt>. If <tt class="ph tt">preseve</tt> is set to <tt class="ph tt">True</tt>,
                                             then user/group/mode attributes will be ignored.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2015.2.0.</span></p>
                                          
                                          <p class="p">The user to own the copied file, this defaults to the user salt is
                                             running as on the minion. If <tt class="ph tt">preserve</tt> is set to <tt class="ph tt">True</tt>, then
                                             this will be ignored
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2015.2.0.</span></p>
                                          
                                          <p class="p">The group to own the copied file, this defaults to the group salt is
                                             running as on the minion. If <tt class="ph tt">preserve</tt> is set to <tt class="ph tt">True</tt> or on
                                             Windows this will be ignored
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">mode</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2015.2.0.</span></p>
                                          
                                          <p class="p">The permissions to set on the copied file, aka 644, '0775', '4664'.
                                             If <tt class="ph tt">preserve</tt> is set to <tt class="ph tt">True</tt>, then this will be ignored.
                                             Not supported on Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e696" class="stentry propvalue">subdir</td>
                                       
                                       <td valign="top" headers="d372276e698" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2015.2.0.</span></p>
                                          
                                          <p class="p">If the name is a directory then place the file inside the named
                                             directory
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.directory">
                              <h3 class="title topictitle3">directory</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.directory(
								name,
								user=None,
								group=None,
								recurse=None,
								dir_mode=None,
								file_mode=None,
								makedirs=False,
								clean=False,
								require=None,
								exclude_pat=None,
								follow_symlinks=False,
								force=False,
								backupname=None,
								allow_symlink=True,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Ensure that a named directory is present and has the right perms</p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e827" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e829" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">The location to create or manage a directory</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">The user to own the directory; this defaults to the user salt is
                                             running as on the minion
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">The group ownership set for the directory; this defaults to the group
                                             salt is running as on the minion. On Windows, this is ignored
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">recurse</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">Enforce user/group ownership and mode of directory recursively. Accepts
                                             a list of strings representing what you would like to recurse.  If
                                             <tt class="ph tt">mode</tt> is defined, will recurse on both <tt class="ph tt">file_mode</tt> and <tt class="ph tt">dir_mode</tt> if
                                             they are defined.  If <tt class="ph tt">ignore_files</tt> or <tt class="ph tt">ignore_dirs</tt> is included, files or
                                             directories will be left unchanged respectively.
                                             Example:
                                          </p>
                                          <pre class="pre codeblock language-yaml">/var/log/httpd:
    file.directory:
    - user: root
    - group: root
    - dir_mode: 755
    - file_mode: 644
    - recurse:
        - user
        - group
        - mode</pre>
                                          <p class="p">Leave files or directories unchanged:</p>
                                          <pre class="pre codeblock language-yaml">/var/log/httpd:
    file.directory:
    - user: root
    - group: root
    - dir_mode: 755
    - file_mode: 644
    - recurse:
        - user
        - group
        - mode
        - ignore_files

/var/log/httpd:
    file.directory:
    - user: root
    - group: root
    - dir_mode: 755
    - file_mode: 644
    - recurse:
        - user
        - group
        - mode
        - ignore_dirs</pre>
                                          <p class="p"><span class="keyword versionmodified">New in version 2015.2.0.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">dir_mode / mode</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">The permissions mode to set any directories created. Not supported on
                                             Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">file_mode</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">The permissions mode to set any files created if 'mode' is run in
                                             'recurse'. This defaults to dir_mode. Not supported on Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">If the directory is located in a path without a parent directory, then
                                             the state will fail. If makedirs is set to True, then the parent
                                             directories will be created to facilitate the creation of the named
                                             file.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">clean</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">Make sure that only files that are set up by salt and required by this
                                             function are kept. If this option is set then everything in this
                                             directory will be deleted unless it is required.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">require</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">Require other resources such as packages or files</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">exclude_pat</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">When 'clean' is set to True, exclude this pattern from removal list
                                             and preserve in the destination.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">follow_symlinks</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">If the desired path is a symlink (or <tt class="ph tt">recurse</tt> is defined and a
                                             symlink is encountered while recursing), follow it and check the
                                             permissions of the directory/file to which the symlink points.
                                          </p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.1.4.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">force</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">If the name of the directory exists and is not a directory and
                                             force is set to False, the state will fail. If force is set to
                                             True, the file in the way of the directory will be deleted to
                                             make room for the directory, unless backupname is set,
                                             then it will be renamed.
                                          </p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">backupname</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">If the name of the directory exists and is not a directory, it will be
                                             renamed to the backupname. If the backupname already
                                             exists and force is False, the state will fail. Otherwise, the
                                             backupname will be removed first.
                                          </p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e827" class="stentry propvalue">allow_symlink</td>
                                       
                                       <td valign="top" headers="d372276e829" class="stentry propdesc">
                                          <p class="p">If allow_symlink is True and the specified path is a symlink, it will be
                                             allowed to remain if it points to a directory. If allow_symlink is False
                                             then the state will fail, unless force is also set to True, in which case
                                             it will be removed or renamed, depending on the value of the backupname
                                             argument.
                                          </p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.exists">
                              <h3 class="title topictitle3">exists</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.exists(
								name
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Verify that the named file or directory is present or exists.
                                       Ensures pre-requisites outside of Salt's purview
                                       (e.g., keytabs, private keys, etc.) have been previously satisfied before
                                       deployment.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e983" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e985" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e983" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e985" class="stentry propdesc">
                                          <p class="p">Absolute path which must exist</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.managed">
                              <h3 class="title topictitle3">managed</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.managed(
								name,
								source=None,
								source_hash='',
								user=None,
								group=None,
								mode=None,
								template=None,
								makedirs=False,
								dir_mode=None,
								context=None,
								replace=True,
								defaults=None,
								env=None,
								backup='',
								show_diff=True,
								create=True,
								contents=None,
								contents_pillar=None,
								contents_grains=None,
								contents_newline=True,
								follow_symlinks=True,
								check_cmd=None,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Manage a given file, this function allows for a file to be downloaded from
                                       the salt master and potentially run through a templating system.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1021" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1023" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">The location of the file to manage</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">source</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">The source file to download to the minion, this source file can be
                                             hosted on either the salt master server, or on an HTTP or FTP server.
                                             Both HTTPS and HTTP are supported as well as downloading directly
                                             from Amazon S3 compatible URLs with both pre-configured and automatic
                                             IAM credentials. (see s3.get state documentation)
                                             File retrieval from Openstack Swift object storage is supported via
                                             swift://container/object_path URLs, see swift.get documentation.
                                             For files hosted on the salt file server, if the file is located on
                                             the master in the directory named spam, and is called eggs, the source
                                             string is salt://spam/eggs. If source is left blank or None
                                             (use ~ in YAML), the file will be created as an empty file and
                                             the content will not be managed
                                          </p>
                                          
                                          <p class="p">If the file is hosted on a HTTP or FTP server then the source_hash
                                             argument is also required
                                          </p>
                                          
                                          <p class="p">A list of sources can also be passed in to provide a default source and
                                             a set of fallbacks. The first source in the list that is found to exist
                                             will be used and subsequent entries in the list will be ignored.
                                          </p>
                                          <pre class="pre codeblock language-yaml">file_override_example:
  file.managed:
    - source:
      - salt://file_that_does_not_exist
      - salt://file_that_exists</pre>
                                          </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">source_hash</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm">This can be one of the following:</dt>
                                             
                                             <dd class="dd">
                                                <ol class="ol">
                                                   <li class="li">
                                                      <p class="p">a source hash string</p>
                                                      
                                                   </li>
                                                   
                                                   <li class="li">
                                                      <p class="p">the URI of a file that contains source hash strings</p>
                                                      
                                                   </li>
                                                   
                                                </ol>
                                                
                                             </dd>
                                             
                                          </dl>
                                          
                                          <p class="p">The function accepts the first encountered long unbroken alphanumeric
                                             string of correct length as a valid hash, in order from most secure to
                                             least secure:
                                          </p>
                                          <pre class="pre codeblock language-text">Type    Length
======  ======
sha512     128
sha384      96
sha256      64
sha224      56
sha1        40
md5         32</pre>
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm"><strong class="ph b">Using a Source Hash File</strong></dt>
                                             
                                             <dd class="dd">
                                                <p class="p">The file can contain several checksums for several files. Each line
                                                   must contain both the file name and the hash.  If no file name is
                                                   matched, the first hash encountered will be used, otherwise the most
                                                   secure hash with the correct source file name will be used.
                                                </p>
                                                
                                                <p class="p">When using a source hash file the source_hash argument needs to be a
                                                   url, the standard download urls are supported, ftp, http, salt etc:
                                                </p>
                                                
                                                <p class="p">Example:</p>
                                                <pre class="pre codeblock language-yaml">tomdroid-src-0.7.3.tar.gz:
  file.managed:
    - name: /tmp/tomdroid-src-0.7.3.tar.gz
    - source: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.tar.gz
    - source_hash: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.hash</pre>
                                                <p class="p">The following is an example of the supported source_hash format:</p>
                                                <pre class="pre codeblock language-text">/etc/rc.conf ef6e82e4006dee563d98ada2a2a80a27
sha254c8525aee419eb649f0233be91c151178b30f0dff8ebbdcc8de71b1d5c8bcc06a  /etc/resolv.conf
ead48423703509d37c4a90e6a0d53e143b6fc268</pre>
                                                <p class="p">Debian file type <tt class="ph tt">*.dsc</tt> files are also supported.
                                                </p>
                                                
                                             </dd>
                                             
                                             <dt class="dt dlterm"><strong class="ph b">Inserting the Source Hash in the sls Data</strong></dt>
                                             
                                             <dd class="dd">
                                                <p class="p">Examples:</p>
                                                <pre class="pre codeblock language-yaml">tomdroid-src-0.7.3.tar.gz:
  file.managed:
    - name: /tmp/tomdroid-src-0.7.3.tar.gz
    - source: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.tar.gz
    - source_hash: md5=79eef25f9b0b2c642c62b7f737d4f53f</pre>
                                                </dd>
                                             
                                             <dt class="dt dlterm">Known issues:</dt>
                                             
                                             <dd class="dd">
                                                <p class="p">If the remote server URL has the hash file as an apparent
                                                   sub-directory of the source file, the module will discover that it
                                                   has already cached a directory where a file should be cached. For
                                                   example:
                                                </p>
                                                <pre class="pre codeblock language-yaml">tomdroid-src-0.7.3.tar.gz:
  file.managed:
    - name: /tmp/tomdroid-src-0.7.3.tar.gz
    - source: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.tar.gz
    - source_hash: https://launchpad.net/tomdroid/beta/0.7.3/+download/tomdroid-src-0.7.3.tar.gz/+md5</pre>
                                                </dd>
                                             
                                          </dl>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">The user to own the file, this defaults to the user salt is running as
                                             on the minion
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">The group ownership set for the file, this defaults to the group salt
                                             is running as on the minion On Windows, this is ignored
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">mode</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">The permissions to set on this file, aka 644, 0775, 4664. Not supported
                                             on Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">template</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">If this setting is applied then the named templating engine will be
                                             used to render the downloaded file, currently jinja, mako, and wempy
                                             are supported
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">If the file is located in a path without a parent directory, then
                                             the state will fail. If makedirs is set to True, then the parent
                                             directories will be created to facilitate the creation of the named
                                             file.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">dir_mode</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">If directories are to be created, passing this option specifies the
                                             permissions for those directories. If this is not set, directories
                                             will be assigned permissions from the 'mode' argument.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">replace</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">If this file should be replaced.  If false, this command will
                                             not overwrite file contents but will enforce permissions if the file
                                             exists already.  Default is True.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">context</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">Overrides default context variables passed to the template.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">defaults</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">Default context passed to the template.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">backup</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">Overrides the default backup mode for this specific file.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">show_diff</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">If set to False, the diff will not be shown.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">create</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">Default is True, if create is set to False then the file will only be
                                             managed if the file already exists on the system.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">contents</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p">Default is None.  If specified, will use the given string as the
                                             contents of the file.  Should not be used in conjunction with a source
                                             file of any kind.  Ignores hashes and does not use a templating engine.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">contents_pillar</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 0.17.0.</span></p>
                                          
                                          <p class="p">Operates like <tt class="ph tt">contents</tt>, but draws from a value stored in pillar,
                                             using the pillar path syntax used in 
                                             		
                                             			&nbsp;<a class="xref" href="../../modules/all/salt.modules.pillar.html#salt.modules.pillar.get">pillar.get</a>. This is useful when the pillar value
                                             contains newlines, as referencing a pillar variable using a jinja/mako
                                             template can result in YAML formatting issues due to the newlines
                                             causing indentation mismatches.
                                          </p>
                                          
                                          <p class="p">For example, the following could be used to deploy an SSH private key:</p>
                                          <pre class="pre codeblock language-yaml">/home/deployer/.ssh/id_rsa:
  file.managed:
    - user: deployer
    - group: deployer
    - mode: 600
    - contents_pillar: userdata:deployer:id_rsa</pre>
                                          <p class="p">This would populate <tt class="ph tt">/home/deployer/.ssh/id_rsa</tt> with the contents of
                                             <tt class="ph tt">pillar['userdata']['deployer']['id_rsa']</tt>. An example of this pillar
                                             setup would be like so:
                                          </p>
                                          <pre class="pre codeblock language-yaml">userdata:
  deployer:
    id_rsa: |
      -----BEGIN RSA PRIVATE KEY-----
      MIIEowIBAAKCAQEAoQiwO3JhBquPAalQF9qP1lLZNXVjYMIswrMe2HcWUVBgh+vY
      U7sCwx/dH6+VvNwmCoqmNnP+8gTPKGl1vgAObJAnMT623dMXjVKwnEagZPRJIxDy
      B/HaAre9euNiY3LvIzBTWRSeMfT+rWvIKVBpvwlgGrfgz70m0pqxu+UyFbAGLin+
      GpxzZAMaFpZw4sSbIlRuissXZj/sHpQb8p9M5IeO4Z3rjkCP1cxI
      -----END RSA PRIVATE KEY-----</pre>
                                          <aside class="note "><span class="glyphicon glyphicon-check"></span><span class="title">Note:</span> 
                                             <p class="p">The private key above is shortened to keep the example brief, but
                                                shows how to do multiline string in YAML. The key is followed by a
                                                pipe character, and the mutliline string is indented two more
                                                spaces.
                                             </p>
                                             
                                          </aside>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">contents_grains</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                          <p class="p">Same as contents_pillar, but with grains</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">contents_newline</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                          <p class="p">When using contents, contents_pillar, or contents_grains, this option
                                             ensures the file will have a newline at the end.
                                             When loading some data this newline is better left off. Setting
                                             contents_newline to False will omit this final newline.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">follow_symlinks</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                          <p class="p">If the desired path is a symlink follow it and make changes to the
                                             file to which the symlink points.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1021" class="stentry propvalue">check_cmd</td>
                                       
                                       <td valign="top" headers="d372276e1023" class="stentry propdesc">
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                          <p class="p">The specified command will be run with the managed file as an argument.
                                             If the command exits with a nonzero exit code, the command will not be
                                             run.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.missing">
                              <h3 class="title topictitle3">missing</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.missing(
								name
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Verify that the named file or directory is missing, this returns True only
                                       if the named file is missing but does not remove the file if it is present.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1280" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1282" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1280" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1282" class="stentry propdesc">
                                          <p class="p">Absolute path which must NOT exist</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.mknod">
                              <h3 class="title topictitle3">mknod</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.mknod(
								name,
								ntype,
								major=0,
								minor=0,
								user=None,
								group=None,
								mode='0600'
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Create a special file similar to the 'nix mknod command. The supported
                                       device types are <tt class="ph tt">p</tt> (fifo pipe), <tt class="ph tt">c</tt> (character device), and <tt class="ph tt">b</tt>
                                       (block device). Provide the major and minor numbers when specifying a
                                       character device or block device. A fifo pipe does not require this
                                       information. The command will create the necessary dirs if needed. If a
                                       file of the same name not of the same type/major/minor exists, it will not
                                       be overwritten or unlinked (deleted). This is logically in place as a
                                       safety measure because you can really shoot yourself in the foot here and
                                       it is the behavior of 'nix <tt class="ph tt">mknod</tt>. It is also important to note that not
                                       just anyone can create special devices. Usually this is only done as root.
                                       If the state is executed as none other than root on a minion, you may
                                       receive a permission error.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1330" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1332" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">name of the file</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">ntype</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">node type 'p' (fifo pipe), 'c' (character device), or 'b'
                                             (block device)
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">major</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">major number of the device
                                             does not apply to a fifo pipe
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">minor</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">minor number of the device
                                             does not apply to a fifo pipe
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">owning user of the device/pipe</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">owning group of the device/pipe</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1330" class="stentry propvalue">mode</td>
                                       
                                       <td valign="top" headers="d372276e1332" class="stentry propdesc">
                                          <p class="p">permissions on the device/pipe</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Usage:</p>
                                    <pre class="pre codeblock language-yaml"> /dev/chr:
   file.mknod:
     - ntype: c
     - major: 180
     - minor: 31
     - user: root
     - group: root
     - mode: 660

 /dev/blk:
   file.mknod:
     - ntype: b
     - major: 8
     - minor: 999
     - user: root
     - group: root
     - mode: 660

/dev/fifo:
  file.mknod:
    - ntype: p
    - user: root
    - group: root
    - mode: 660</pre>
                                    <p class="p"><span class="keyword versionmodified">New in version 0.17.0.</span></p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.mod_run_check_cmd">
                              <h3 class="title topictitle3">mod_run_check_cmd</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.mod_run_check_cmd(
								cmd,
								filename,
								**check_cmd_opts
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Execute the check_cmd logic.</p>
                                    
                                    <p class="p">Return a result dict if <tt class="ph tt">check_cmd</tt> succeeds (check_cmd == 0)
                                       otherwise return True
                                    </p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.patch">
                              <h3 class="title topictitle3">patch</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.patch(
								name,
								source=None,
								hash=None,
								options='',
								dry_run_first=True,
								env=None,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Apply a patch to a file.</p>
                                    
                                    <aside class="note "><span class="glyphicon glyphicon-check"></span><span class="title">Note:</span> 
                                       <p class="p">A suitable <tt class="ph tt">patch</tt> executable must be available on the minion when
                                          using this state function.
                                       </p>
                                       
                                    </aside>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1450" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1452" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1450" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1452" class="stentry propdesc">
                                          <p class="p">The file to with the patch will be applied.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1450" class="stentry propvalue">source</td>
                                       
                                       <td valign="top" headers="d372276e1452" class="stentry propdesc">
                                          <p class="p">The source patch to download to the minion, this source file must be
                                             hosted on the salt master server. If the file is located in the
                                             directory named spam, and is called eggs, the source string is
                                             salt://spam/eggs. A source is required.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1450" class="stentry propvalue">hash</td>
                                       
                                       <td valign="top" headers="d372276e1452" class="stentry propdesc">
                                          <p class="p">Hash of the patched file. If the hash of the target file matches this
                                             value then the patch is assumed to have been applied. The hash string
                                             is the hash algorithm followed by the hash of the file:
                                             md5=e138491e9d5b97023cea823fe17bac22
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1450" class="stentry propvalue">options</td>
                                       
                                       <td valign="top" headers="d372276e1452" class="stentry propdesc">
                                          <p class="p">Extra options to pass to patch.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1450" class="stentry propvalue">dry_run_first</td>
                                       
                                       <td valign="top" headers="d372276e1452" class="stentry propdesc">
                                          <p class="p">Run patch with <tt class="ph tt">--dry-run</tt> first to check if it will apply cleanly.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1450" class="stentry propvalue">env</td>
                                       
                                       <td valign="top" headers="d372276e1452" class="stentry propdesc">
                                          <p class="p">Specify the environment from which to retrieve the patch file indicated
                                             by the <tt class="ph tt">source</tt> parameter. If not provided, this defaults to the
                                             environment from which the state is being executed.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Usage:</p>
                                    <pre class="pre codeblock language-yaml"># Equivalent to ``patch --forward /opt/file.txt file.patch``
/opt/file.txt:
  file.patch:
    - source: salt://file.patch
    - hash: md5=e138491e9d5b97023cea823fe17bac22</pre>
                                    </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.prepend">
                              <h3 class="title topictitle3">prepend</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.prepend(
								name,
								text=None,
								makedirs=False,
								source=None,
								source_hash=None,
								template='jinja',
								sources=None,
								source_hashes=None,
								defaults=None,
								context=None
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Ensure that some text appears at the beginning of a file</p>
                                    
                                    <p class="p">The text will not be prepended again if it already exists in the file. You
                                       may specify a single line of text or a list of lines to append.
                                    </p>
                                    
                                    <p class="p">Multi-line example:</p>
                                    <pre class="pre codeblock language-yaml">/etc/motd:
  file.prepend:
    - text: |
        Thou hadst better eat salt with the Philosophers of Greece,
        than sugar with the Courtiers of Italy.
        - Benjamin Franklin</pre>
                                    <p class="p">Multiple lines of text:</p>
                                    <pre class="pre codeblock language-yaml">/etc/motd:
  file.prepend:
    - text:
      - Trust no one unless you have eaten much salt with him.
      - "Salt is born of the purest of parents: the sun and the sea."</pre>
                                    <p class="p">Gather text from multiple template files:</p>
                                    <pre class="pre codeblock language-yaml">/etc/motd:
  file:
      - prepend
      - template: jinja
      - sources:
          - salt://motd/devops-messages.tmpl
          - salt://motd/hr-messages.tmpl
          - salt://motd/general-messages.tmpl</pre>
                                    <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.recurse">
                              <h3 class="title topictitle3">recurse</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.recurse(
								name,
								source,
								clean=False,
								require=None,
								user=None,
								group=None,
								dir_mode=None,
								file_mode=None,
								sym_mode=None,
								template=None,
								context=None,
								defaults=None,
								env=None,
								include_empty=False,
								backup='',
								include_pat=None,
								exclude_pat=None,
								maxdepth=None,
								keep_symlinks=False,
								force_symlinks=False,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Recurse through a subdirectory on the master and copy said subdirectory
                                       over to the specified path.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1573" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1575" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The directory to set the recursion in</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">source</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The source directory, this directory is located on the salt master file
                                             server and is specified with the salt:// protocol. If the directory is
                                             located on the master in the directory named spam, and is called eggs,
                                             the source string is salt://spam/eggs
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">clean</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">Make sure that only files that are set up by salt and required by this
                                             function are kept. If this option is set then everything in this
                                             directory will be deleted unless it is required.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">require</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">Require other resources such as packages or files</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The user to own the directory. This defaults to the user salt is
                                             running as on the minion
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The group ownership set for the directory. This defaults to the group
                                             salt is running as on the minion. On Windows, this is ignored
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">dir_mode</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The permissions mode to set on any directories created. Not supported on
                                             Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">file_mode</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The permissions mode to set on any files created. Not supported on
                                             Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">sym_mode</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">The permissions mode to set on any symlink created. Not supported on
                                             Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1573" class="stentry propvalue">template</td>
                                       
                                       <td valign="top" headers="d372276e1575" class="stentry propdesc">
                                          <p class="p">If this setting is applied then the named templating engine will be
                                             used to render the downloaded file. Supported templates are:
                                             <span class="keyword title_reference">jinja</span>, <span class="keyword title_reference">mako</span> and <span class="keyword title_reference">wempy</span>.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <p class="p">Recurse through a subdirectory on the master and copy said subdirectory
                                       over to the specified path.
                                    </p>
                                    
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1651" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1653" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">context</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">Overrides default context variables passed to the template.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">defaults</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">Default context passed to the template.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">include_empty</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">Set this to True if empty directories should also be created
                                             (default is False)
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">include_pat</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">When copying, include only this pattern from the source. Default
                                             is glob match; if prefixed with 'E@', then regexp match.
                                             Example:
                                          </p>
                                          <pre class="pre codeblock language-yaml">- include_pat: hello*       :: glob matches 'hello01', 'hello02'
                               ... but not 'otherhello'
- include_pat: E@hello      :: regexp matches 'otherhello',
                               'hello01' ...</pre>
                                          </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">exclude_pat</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">Exclude this pattern from the source when copying. If both
                                             <span class="keyword title_reference">include_pat</span> and <span class="keyword title_reference">exclude_pat</span> are supplied, then it will apply
                                             conditions cumulatively. i.e. first select based on include_pat, and
                                             then within that result apply exclude_pat.
                                          </p>
                                          
                                          <p class="p">Also, when 'clean=True', exclude this pattern from the removal
                                             list and preserve in the destination.
                                             Example:
                                          </p>
                                          <pre class="pre codeblock language-yaml">- exclude_pat: APPDATA*               :: glob matches APPDATA.01,
                                         APPDATA.02,.. for exclusion
- exclude_pat: E@(APPDATA)|(TEMPDATA) :: regexp matches APPDATA
                                         or TEMPDATA for exclusion</pre>
                                          </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">maxdepth</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">When copying, only copy paths which are of depth <span class="keyword title_reference">maxdepth</span> from the
                                             source path.
                                             Example:
                                          </p>
                                          <pre class="pre codeblock language-yaml">- maxdepth: 0      :: Only include files located in the source
                      directory
- maxdepth: 1      :: Only include files located in the source
                      or immediate subdirectories</pre>
                                          </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">keep_symlinks</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">Keep symlinks when copying from the source. This option will cause
                                             the copy operation to terminate at the symlink. If desire behavior
                                             similar to rsync, then set this to True.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1651" class="stentry propvalue">force_symlinks</td>
                                       
                                       <td valign="top" headers="d372276e1653" class="stentry propdesc">
                                          <p class="p">Force symlink creation. This option will force the symlink creation.
                                             If a file or directory is obstructing symlink creation it will be
                                             recursively removed so that symlink creation can proceed. This
                                             option is usually not needed except in special circumstances.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.rename">
                              <h3 class="title topictitle3">rename</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.rename(
								name,
								source,
								force=False,
								makedirs=False
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">If the source file exists on the system, rename it to the named file. The
                                       named file will not be overwritten if it already exists unless the force
                                       option is set to True.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1748" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1750" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1748" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1750" class="stentry propdesc">
                                          <p class="p">The location of the file to rename to</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1748" class="stentry propvalue">source</td>
                                       
                                       <td valign="top" headers="d372276e1750" class="stentry propdesc">
                                          <p class="p">The location of the file to move to the location specified with name</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1748" class="stentry propvalue">force</td>
                                       
                                       <td valign="top" headers="d372276e1750" class="stentry propdesc">
                                          <p class="p">If the target location is present then the file will not be moved,
                                             specify "force: True" to overwrite the target file
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1748" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e1750" class="stentry propdesc">
                                          <p class="p">If the target subdirectories don't exist create them</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.replace">
                              <h3 class="title topictitle3">replace</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.replace(
								name,
								pattern,
								repl,
								count=0,
								flags=0,
								bufsize=1,
								append_if_not_found=False,
								prepend_if_not_found=False,
								not_found_content=None,
								backup='.bak',
								show_changes=True
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Maintain an edit in a file</p>
                                    
                                    <p class="p"><span class="keyword versionmodified">New in version 0.17.0.</span></p>
                                    
                                    <p class="p">Params are identical to the remote execution function 
                                       		
                                       			&nbsp;<a class="xref" href="../../modules/all/salt.modules.file.html#salt.modules.file.replace">file.replace</a>.
                                    </p>
                                    
                                    <p class="p">For complex regex patterns it can be useful to avoid the need for complex
                                       quoting and escape sequences by making use of YAML's multiline string
                                       syntax.
                                    </p>
                                    <pre class="pre codeblock language-yaml">complex_search_and_replace:
  file.replace:
    # &lt;...snip...&gt;
    - pattern: |
        CentOS \(2.6.32[^\n]+\n\s+root[^\n]+\n\)+</pre>
                                    </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.serialize">
                              <h3 class="title topictitle3">serialize</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.serialize(
								name,
								dataset=None,
								dataset_pillar=None,
								user=None,
								group=None,
								mode=None,
								env=None,
								backup='',
								makedirs=False,
								show_diff=True,
								create=True,
								merge_if_exists=False,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Serializes dataset and store it into managed file. Useful for sharing
                                       simple configuration files.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1842" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1844" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">The location of the file to create</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">dataset</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">The dataset that will be serialized</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">dataset_pillar</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">Operates like <tt class="ph tt">dataset</tt>, but draws from a value stored in pillar,
                                             using the pillar path syntax used in 
                                             		
                                             			&nbsp;<a class="xref" href="../../modules/all/salt.modules.pillar.html#salt.modules.pillar.get">pillar.get</a>. This is useful when the pillar value
                                             contains newlines, as referencing a pillar variable using a jinja/mako
                                             template can result in YAML formatting issues due to the newlines
                                             causing indentation mismatches.
                                          </p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version FIXME.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">formatter</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">Write the data as this format. Supported output formats:</p>
                                          
                                          <ul class="ul">
                                             <li class="li">
                                                <p class="p">JSON</p>
                                                
                                             </li>
                                             
                                             <li class="li">
                                                <p class="p">YAML</p>
                                                
                                             </li>
                                             
                                             <li class="li">
                                                <p class="p">Python (via pprint.pformat)</p>
                                                
                                             </li>
                                             
                                          </ul>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">The user to own the directory, this defaults to the user salt is
                                             running as on the minion
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">The group ownership set for the directory, this defaults to the group
                                             salt is running as on the minion
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">mode</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">The permissions to set on this file, aka 644, 0775, 4664</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">backup</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">Overrides the default backup mode for this specific file.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">Create parent directories for destination file.</p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.1.3.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">show_diff</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">If set to False, the diff will not be shown.</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">create</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">Default is True, if create is set to False then the file will only be
                                             managed if the file already exists on the system.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1842" class="stentry propvalue">merge_if_exists</td>
                                       
                                       <td valign="top" headers="d372276e1844" class="stentry propdesc">
                                          <p class="p">Default is False, if merge_if_exists is True then the existing file will
                                             be parsed and the dataset passed in will be merged with the existing
                                             content
                                          </p>
                                          
                                          <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">For example, this state:</p>
                                    <pre class="pre codeblock language-yaml">/etc/dummy/package.json:
  file.serialize:
    - dataset:
        name: naive
        description: A package using naive versioning
        author: A confused individual &lt;iam@confused.com&gt;
        dependencies:
            express: &gt;= 1.2.0
            optimist: &gt;= 0.1.0
        engine: node 0.4.1
    - formatter: json</pre>
                                    <p class="p">will manage the file <tt class="ph tt">/etc/dummy/package.json</tt>:
                                    </p>
                                    <pre class="pre codeblock language-javascript">{
  "author": "A confused individual &lt;iam@confused.com&gt;",
  "dependencies": {
    "express": "&gt;= 1.2.0",
    "optimist": "&gt;= 0.1.0"
  },
  "description": "A package using naive versioning",
  "engine": "node 0.4.1",
  "name": "naive"
}</pre>
                                    </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.symlink">
                              <h3 class="title topictitle3">symlink</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.symlink(
								name,
								target,
								force=False,
								backupname=None,
								makedirs=False,
								user=None,
								group=None,
								mode=None,
								**kwargs
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Create a symlink</p>
                                    
                                    <p class="p">If the file already exists and is a symlink pointing to any location other
                                       than the specified target, the symlink will be replaced. If the symlink is
                                       a regular file or directory then the state will return False. If the
                                       regular file or directory is desired to be replaced with a symlink pass
                                       force: True, if it is to be renamed, pass a backupname.
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e1989" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e1991" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">The location of the symlink to create</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">target</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">The location that the symlink points to</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">force</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">If the name of the symlink exists and is not a symlink and
                                             force is set to False, the state will fail. If force is set to
                                             True, the file or directory in the way of the symlink file
                                             will be deleted to make room for the symlink, unless
                                             backupname is set, when it will be renamed
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">backupname</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">If the name of the symlink exists and is not a symlink, it will be
                                             renamed to the backupname. If the backupname already
                                             exists and force is False, the state will fail. Otherwise, the
                                             backupname will be removed first.
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">If the location of the symlink does not already have a parent directory
                                             then the state will fail, setting makedirs to True will allow Salt to
                                             create the parent directory
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">user</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">The user to own the file, this defaults to the user salt is running as
                                             on the minion
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">group</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">The group ownership set for the file, this defaults to the group salt
                                             is running as on the minion. On Windows, this is ignored
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e1989" class="stentry propvalue">mode</td>
                                       
                                       <td valign="top" headers="d372276e1991" class="stentry propdesc">
                                          <p class="p">The permissions to set on this file, aka 644, 0775, 4664. Not supported
                                             on Windows
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.touch">
                              <h3 class="title topictitle3">touch</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.touch(
								name,
								atime=None,
								mtime=None,
								makedirs=False
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Replicate the 'nix "touch" command to create a new empty
                                       file or update the atime and mtime of an existing file.
                                    </p>
                                    
                                    <p class="p">Note that if you just want to create a file and don't care about atime or
                                       mtime, you should use <tt class="ph tt">file.managed</tt> instead, as it is more
                                       feature-complete.  (Just leave out the <tt class="ph tt">source</tt>/<tt class="ph tt">template</tt>/<tt class="ph tt">contents</tt>
                                       arguments, and it will just create the file and/or check its permissions,
                                       without messing with contents)
                                    </p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e2083" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e2085" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2083" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e2085" class="stentry propdesc">
                                          <p class="p">name of the file</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2083" class="stentry propvalue">atime</td>
                                       
                                       <td valign="top" headers="d372276e2085" class="stentry propdesc">
                                          <p class="p">atime of the file</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2083" class="stentry propvalue">mtime</td>
                                       
                                       <td valign="top" headers="d372276e2085" class="stentry propdesc">
                                          <p class="p">mtime of the file</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2083" class="stentry propvalue">makedirs</td>
                                       
                                       <td valign="top" headers="d372276e2085" class="stentry propdesc">
                                          <p class="p">whether we should create the parent directory/directories in order to
                                             touch the file
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Usage:</p>
                                    <pre class="pre codeblock language-yaml">/var/log/httpd/logrotate.empty:
  file.touch</pre>
                                    <p class="p"><span class="keyword versionmodified">New in version 0.9.5.</span></p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                           <div class="topic reference nested2" id="salt.states.file.uncomment">
                              <h3 class="title topictitle3">uncomment</h3>
                              <div class="body refbody">
                                 <div class="section">
                                    <h4 class="title sectiontitle">Syntax</h4>
                                 </div>
                                 
                                 <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.states.file.uncomment(
								name,
								regex,
								char='#',
								backup='.bak'
								)</pre>
                                    </div>
                                 
                                 <div class="section">
                                    <p class="p">Uncomment specified commented lines in a file</p>
                                    
                                 </div>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Arguments</h4>
                                 </div>
                                 
                                 <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                    <tr class="sthead prophead">
                                       
                                       <th valign="bottom" align="left" id="d372276e2150" class="stentry propvaluehd">Name</th>
                                       
                                       <th valign="bottom" align="left" id="d372276e2152" class="stentry propdeschd">Description</th>
                                       
                                    </tr>
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2150" class="stentry propvalue">name</td>
                                       
                                       <td valign="top" headers="d372276e2152" class="stentry propdesc">
                                          <p class="p">The full path to the file to be edited</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2150" class="stentry propvalue">regex</td>
                                       
                                       <td valign="top" headers="d372276e2152" class="stentry propdesc">
                                          <p class="p">A regular expression used to find the lines that are to be uncommented.
                                             This regex should not include the comment character. A leading <tt class="ph tt">^</tt>
                                             character will be stripped for convenience (for easily switching
                                             between comment() and uncomment()).  The regex will be searched for
                                             from the beginning of the line, ignoring leading spaces (we prepend
                                             '^[ t]*')
                                          </p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2150" class="stentry propvalue">char</td>
                                       
                                       <td valign="top" headers="d372276e2152" class="stentry propdesc">
                                          <p class="p">The character to remove in order to uncomment a line</p>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                    <tr class="strow property">
                                       
                                       <td valign="top" headers="d372276e2150" class="stentry propvalue">backup</td>
                                       
                                       <td valign="top" headers="d372276e2152" class="stentry propdesc">
                                          <p class="p">The file will be backed up before edit with this file extension;</p>
                                          
                                          <aside class="important "><span class="glyphicon glyphicon-exclamation-sign"></span><span class="title">Important:</span> 
                                             <p class="p">This backup will be overwritten each time <tt class="ph tt">sed</tt> / <tt class="ph tt">comment</tt> /
                                                <tt class="ph tt">uncomment</tt> is called. Meaning the backup will only be useful
                                                after the first invocation.
                                             </p>
                                             
                                          </aside>
                                          
                                       </td>
                                       
                                    </tr>
                                    
                                 </table>
                                 
                                 <div class="section">
                                    <h4 class="title sectiontitle">Details</h4>
                                    <p class="p">Usage:</p>
                                    <pre class="pre codeblock language-yaml">/etc/adduser.conf:
  file.uncomment:
    - regex: EXTRA_GROUPS</pre>
                                    <p class="p"><span class="keyword versionmodified">New in version 0.9.5.</span></p>
                                    
                                 </div>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                     </div>
                     <button id="next-button" type="button" class="btn btn-primary">
                        Next <span class="glyphicon glyphicon-chevron-right"></span></button><div class="footer">

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>