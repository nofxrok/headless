<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>salt.modules.boto_cloudwatch</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="schema.DC" href="http://purl.org/dc/terms/">
      <meta name="DC.Type" content="reference">
      
      <meta name="DC.Title" content="salt.modules.boto_cloudwatch">
      
      <meta name="DC.Relation" scheme="URI" content="../../exe-modules.html">
      
      <meta name="DC.Format" content="XHTML">
      
      <meta name="DC.Identifier" content="salt-modules-boto-cloudwatch">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/gui/css/core.min.css">
      
      <link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/gui/css/webhelp.min.css">
      <script type="text/javascript" src="../../../themes/gui/js/webhelp.min.js"></script>
      </head>
   <body>
      <div id="wrapper">
         <!--ZOOMSTOP-->
         <div id="sidebar-wrapper" class="reference dynamic-toc"></div>
         <!--ZOOMRESTART-->
         <div id="page-content-wrapper">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="page reference  - topic-topic       reference-reference " id="salt-modules-boto-cloudwatch">
                        <!--ZOOMSTOP--><a href="#menu-toggle" class="btn btn-primary" id="menu-toggle">Toggle Menu</a><!--ZOOMRESTART--><h1 class="title topictitle1">salt.modules.boto_cloudwatch</h1>
                        <div class="body refbody">
                           <div class="section">
                              <p class="p ids"><span class="ph" id="salt-modules-boto-cloudwatch__module-salt.modules.boto_cloudwatch"></span></p>
                              
                              <p class="p">Connection module for Amazon CloudWatch</p>
                              
                              <p class="p"><span class="keyword versionmodified">New in version 2014.7.0.</span></p>
                              
                              <dl class="dl field_list">
                                 <dt class="dt dlterm">configuration</dt>
                                 
                                 <dd class="dd">
                                    <p class="p">This module accepts explicit credentials but can also utilize
                                       IAM roles assigned to the instance trough Instance Profiles. Dynamic
                                       credentials are then automatically obtained from AWS API and no further
                                       configuration is necessary. More Information available at:
                                    </p>
                                    <pre class="pre codeblock language-">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html</pre>
                                    <p class="p">If IAM roles are not used you need to specify them either in a pillar or
                                       in the minion's config file:
                                    </p>
                                    <pre class="pre codeblock language-">cloudwatch.keyid: GKTADJGHEIQSXMKKRBJ08H
cloudwatch.key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs</pre>
                                    <p class="p">A region may also be specified in the configuration:</p>
                                    <pre class="pre codeblock language-">cloudwatch.region: us-east-1</pre>
                                    <p class="p">If a region is not specified, the default is us-east-1.</p>
                                    
                                    <p class="p">It's also possible to specify key, keyid and region via a profile, either
                                       as a passed in dict, or as a string to pull from pillars or minion config:
                                    </p>
                                    
                                    <blockquote class="lq">
                                       <dl class="dl definition_list">
                                          <dt class="dt dlterm">myprofile:</dt>
                                          
                                          <dd class="dd">
                                             <p class="p">keyid: GKTADJGHEIQSXMKKRBJ08H
                                                key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs
                                                region: us-east-1
                                             </p>
                                             
                                          </dd>
                                          
                                       </dl>
                                       
                                    </blockquote>
                                    
                                 </dd>
                                 
                                 <dt class="dt dlterm">depends</dt>
                                 
                                 <dd class="dd">
                                    <p class="p">boto</p>
                                    
                                 </dd>
                                 
                              </dl>
                              
                           </div>
                           
                        </div>
                        
                        <div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="related-links"></div>
                        <div class="topic reference nested1" id="salt.modules.boto_cloudwatch.convert_to_arn">
                           <h2 class="title topictitle2">convert_to_arn</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.modules.boto_cloudwatch.convert_to_arn(
								arns,
								region=None,
								key=None,
								keyid=None,
								profile=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Convert a list of strings into actual arns. Converts convenience names such
                                    as 'scaling_policy:...'
                                 </p>
                                 
                                 <p class="p">CLI Example:</p>
                                 <pre class="pre codeblock language-">salt '*' convert_to_arn 'scaling_policy:'</pre>
                                 </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.modules.boto_cloudwatch.create_or_update_alarm">
                           <h2 class="title topictitle2">create_or_update_alarm</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.modules.boto_cloudwatch.create_or_update_alarm(
								connection=None,
								name=None,
								metric=None,
								namespace=None,
								statistic=None,
								comparison=None,
								threshold=None,
								period=None,
								evaluation_periods=None,
								unit=None,
								description='',
								dimensions=None,
								alarm_actions=None,
								insufficient_data_actions=None,
								ok_actions=None,
								region=None,
								key=None,
								keyid=None,
								profile=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <p class="p">Create or update a cloudwatch alarm.</p>
                                 
                              </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Arguments</h3>
                              </div>
                              
                              <table cellpadding="4" cellspacing="0" summary="" class="simpletable properties">
                                 <tr class="sthead prophead">
                                    
                                    <th valign="bottom" align="left" id="d58907e114" class="stentry propvaluehd">Name</th>
                                    
                                    <th valign="bottom" align="left" id="d58907e116" class="stentry propdeschd">Description</th>
                                    
                                 </tr>
                                 <tr class="strow property">
                                    
                                    <td valign="top" headers="d58907e114" class="stentry propvalue">Params are the same as:</td>
                                    
                                    <td valign="top" headers="d58907e116" class="stentry propdesc">
                                       <p class="p"><a class="xref" href="http://boto.readthedocs.org/en/latest/ref/cloudwatch.html#boto.ec2.cloudwatch.alarm.MetricAlarm" target="_blank">http://boto.readthedocs.org/en/latest/ref/cloudwatch.html#boto.ec2.cloudwatch.alarm.MetricAlarm</a>.
                                       </p>
                                       
                                    </td>
                                    
                                 </tr>
                                 
                              </table>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Dimensions must be a dict. If the value of Dimensions is a string, it will
                                    be json decoded to produce a dict. alarm_actions, insufficient_data_actions,
                                    and ok_actions must be lists of string.  If the passed-in value is a string,
                                    it will be split on "," to produce a list. The strings themselves for
                                    alarm_actions, insufficient_data_actions, and ok_actions must be Amazon
                                    resource names (ARN's); however, this method also supports an arn lookup
                                    notation, as follows:
                                 </p>
                                 
                                 <blockquote class="lq">
                                    <p class="p">arn:aws:....                                    ARN as per http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html
                                       scaling_policy:&lt;as_name&gt;:&lt;scaling_policy_name&gt;  The named autoscale group scaling
                                       policy, for the named group (e.g.  scaling_policy:my-asg:ScaleDown)
                                    </p>
                                    
                                 </blockquote>
                                 
                                 <p class="p">This is convenient for setting up autoscaling as follows.  First specify a
                                    boto_asg.present state for an ASG with scaling_policies, and then set up
                                    boto_cloudwatch_alarm.present states which have alarm_actions that
                                    reference the scaling_policy.
                                 </p>
                                 
                                 <p class="p">CLI example:</p>
                                 
                                 <blockquote class="lq">
                                    <p class="p">salt myminion boto_cloudwatch.create_alarm name=myalarm ... region=us-east-1</p>
                                    
                                 </blockquote>
                                 
                              </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.modules.boto_cloudwatch.delete_alarm">
                           <h2 class="title topictitle2">delete_alarm</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.modules.boto_cloudwatch.delete_alarm(
								name,
								region=None,
								key=None,
								keyid=None,
								profile=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Delete a cloudwatch alarm</p>
                                 
                                 <p class="p">CLI example to delete a queue:</p>
                                 <pre class="pre codeblock language-">salt myminion boto_cloudwatch.delete_alarm myalarm region=us-east-1</pre>
                                 </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.modules.boto_cloudwatch.get_alarm">
                           <h2 class="title topictitle2">get_alarm</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.modules.boto_cloudwatch.get_alarm(
								name,
								region=None,
								key=None,
								keyid=None,
								profile=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Get alarm details. Also can be used to check to see if an alarm exists.</p>
                                 
                                 <p class="p">CLI example:</p>
                                 <pre class="pre codeblock language-">salt myminion boto_cloudwatch.get_alarm myalarm region=us-east-1</pre>
                                 </div>
                              
                           </div>
                           
                        </div>
                        
                        <div class="topic reference nested1" id="salt.modules.boto_cloudwatch.get_all_alarms">
                           <h2 class="title topictitle2">get_all_alarms</h2>
                           <div class="body refbody">
                              <div class="section">
                                 <h3 class="title sectiontitle">Syntax</h3>
                              </div>
                              
                              <div class="section refsyn"><pre class="pre codeblock language-python" xml:lang="" lang="">salt.modules.boto_cloudwatch.get_all_alarms(
								region=None,
								prefix=None,
								key=None,
								keyid=None,
								profile=None
								)</pre>
                                 </div>
                              
                              <div class="section">
                                 <h3 class="title sectiontitle">Details</h3>
                                 <p class="p">Get all alarm details.  Produces results that can be used to create an sls
                                    file.
                                 </p>
                                 
                                 <p class="p">If prefix parameter is given, alarm names in the output will be prepended
                                    with the prefix; alarms that have the prefix will be skipped.  This can be
                                    used to convert existing alarms to be managed by salt, as follows:
                                 </p>
                                 
                                 <blockquote class="lq">
                                    <ol class="ol">
                                       <li class="li">
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm">Make a "backup" of all existing alarms</dt>
                                             
                                             <dd class="dd">
                                                <p class="p">$ salt-call boto_cloudwatch.get_all_alarms --out=txt | sed "s/local: //" &gt; legacy_alarms.sls</p>
                                                
                                             </dd>
                                             
                                          </dl>
                                          
                                       </li>
                                       
                                       <li class="li">
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm">Get all alarms with new prefixed names</dt>
                                             
                                             <dd class="dd">
                                                <p class="p">$ salt-call boto_cloudwatch.get_all_alarms "prefix=**MANAGED BY SALT** " --out=txt
                                                   | sed "s/local: //" &gt; managed_alarms.sls
                                                </p>
                                                
                                             </dd>
                                             
                                          </dl>
                                          
                                       </li>
                                       
                                       <li class="li">
                                          <dl class="dl definition_list">
                                             <dt class="dt dlterm">Insert the managed alarms into cloudwatch</dt>
                                             
                                             <dd class="dd">
                                                <p class="p">$ salt-call state.template managed_alarms.sls</p>
                                                
                                             </dd>
                                             
                                          </dl>
                                          
                                       </li>
                                       
                                       <li class="li">
                                          <p class="p">Manually verify that the new alarms look right</p>
                                          
                                       </li>
                                       
                                       <li class="li">
                                          <p class="p">Delete the original alarms
                                             $ sed s/present/absent/ legacy_alarms.sls &gt; remove_legacy_alarms.sls
                                             $ salt-call state.template remove_legacy_alarms.sls
                                          </p>
                                          
                                       </li>
                                       
                                       <li class="li">
                                          <p class="p">Get all alarms again, verify no changes
                                             $ salt-call boto_cloudwatch.get_all_alarms --out=txt | sed "s/local: //" &gt; final_alarms.sls
                                             $ diff final_alarms.sls managed_alarms.sls
                                          </p>
                                          
                                       </li>
                                       
                                    </ol>
                                    
                                 </blockquote>
                                 
                                 <p class="p">CLI example:</p>
                                 <pre class="pre codeblock language-">salt myminion boto_cloudwatch.get_all_alarms region=us-east-1 --out=txt</pre>
                                 </div>
                              
                           </div>
                           
                        </div>
                        
                     </div>
                     <button id="next-button" type="button" class="btn btn-primary">
                        Next <span class="glyphicon glyphicon-chevron-right"></span></button><div class="footer">

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>